<!doctype html><html lang=en-uk prefix="og: http://ogp.me/ns#">
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<title>Supercharge your Java Projects with Conventional Commits, Semantic Versioning and Semantic Releases</title><meta property="og:title" content="Supercharge your Java Projects with Conventional Commits, Semantic Versioning and Semantic Releases">
<meta name=twitter:title content="Supercharge your Java Projects with Conventional Commits, Semantic Versioning and Semantic Releases">
<meta name=description content="How to use Conventional Commits, Semantic Versioning and Semantic Release for Java">
<meta property="og:description" content="How to use Conventional Commits, Semantic Versioning and Semantic Release for Java">
<meta name=twitter:description content="How to use Conventional Commits, Semantic Versioning and Semantic Release for Java">
<meta name=author content="Dave Kerr">
<meta property="og:site_name" content="dwmkerr.com">
<meta property="og:url" content="https://dwmkerr.com/conventional-commits-and-semantic-versioning-for-java/">
<meta name=twitter:card content="summary">
<meta name=twitter:site content="@dwmkerr">
<meta name=twitter:creator content="@dwmkerr">
<meta property="og:type" content="article">
<meta name=generator content="Hugo 0.93.0">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-268095267"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-268095267",{anonymize_ip:!1})}</script>
<link rel=stylesheet href=https://dwmkerr.com/css/style.css>
<link rel=icon type=image/x-icon href=https://dwmkerr.com/images/favicon.ico>
</head><body>
<a href=#main class="skip-link p-screen-reader-text">Skip to content</a><svg xmlns="http://www.w3.org/2000/svg" style="display:none" aria-hidden="true"><symbol id="icon-500px" viewBox="0 0 16 16"><g><path d="M3.953 10.512a5.24 5.24.0 006.996 3.141c.625-.262 1.184-.641 1.666-1.122s.859-1.041 1.122-1.666c.272-.647.412-1.331.412-2.037s-.137-1.394-.412-2.037c-.262-.625-.641-1.184-1.122-1.666s-1.041-.859-1.666-1.122A5.226 5.226.0 008.912 3.59c-.716.0-1.431.144-2.066.413-.509.216-1.372.769-1.875 1.291l-.003.003V.984h7.241c.262-.003.262-.372.262-.491.0-.122.0-.487-.266-.491H4.377a.343.343.0 00-.344.341v6.066c0 .197.244.338.472.384.444.094.544-.047.653-.197l.016-.019c.166-.247.681-.766.688-.772a4.262 4.262.0 013.037-1.25c1.147.0 2.222.444 3.028 1.25a4.245 4.245.0 011.256 3.019 4.236 4.236.0 01-1.25 3.019 4.336 4.336.0 01-3.047 1.25 4.136 4.136.0 01-2.159-.597l.003-3.688c0-.491.213-1.028.572-1.431a2.09 2.09.0 011.588-.716c.594.0 1.15.225 1.566.634.409.406.637.95.637 1.528A2.179 2.179.0 018.887 11.02c-.238.0-.672-.106-.691-.109-.25-.075-.356.272-.391.387-.134.441.069.528.109.541.397.125.659.147 1.003.147a3.173 3.173.0 003.169-3.169c0-1.734-1.422-3.144-3.166-3.144-.856.0-1.659.328-2.263.919-.575.566-.903 1.319-.903 2.069v.019c-.003.094-.003 2.306-.006 3.031l-.003-.003c-.328-.363-.653-.919-.869-1.488-.084-.222-.275-.184-.534-.103-.125.034-.469.141-.391.394zm3.722-.865c0 .106.097.2.156.253l.019.019c.1.097.194.147.281.147a.181.181.0 00.131-.05c.044-.041.537-.544.588-.591l.553.55c.05.056.106.088.172.088.088.0.184-.053.284-.156.238-.244.119-.375.063-.438l-.559-.559.584-.588c.128-.137.016-.284-.097-.397-.162-.162-.322-.206-.422-.112l-.581.581-.588-.588a.16.16.0 00-.113-.047c-.078.0-.172.053-.275.156-.181.181-.219.306-.125.406l.588.584-.584.584c-.053.05-.078.103-.075.156zm1.278-7.931c-.938.0-1.938.191-2.669.506a.207.207.0 00-.134.181.753.753.0 00.069.337c.047.116.166.425.4.334a6.689 6.689.0 012.334-.444 6.35 6.35.0 012.469.497c.622.263 1.206.644 1.844 1.194a.22.22.0 00.147.059c.125.0.244-.122.347-.237.169-.191.287-.35.119-.509a6.858 6.858.0 00-2.1-1.356 7.326 7.326.0 00-2.825-.563zM14.006 13.3c-.113-.113-.209-.178-.294-.203s-.162-.006-.222.053l-.056.056a6.32 6.32.0 01-6.938 1.356 6.336 6.336.0 01-2.013-1.356 6.046 6.046.0 01-1.356-2.012c-.288-.713-.381-1.247-.413-1.422-.003-.016-.006-.028-.006-.037-.041-.206-.231-.222-.503-.178-.112.019-.459.072-.428.319v.006a7.261 7.261.0 002.04 3.994 7.266 7.266.0 0010.288.0l.059-.059c.069-.084.134-.225-.159-.516z"/></g></symbol><symbol id="icon-codepen" viewBox="0 0 16 16"><g><path d="M14.777 5.751l-7-4.667a.5.5.0 00-.555.0l-7 4.667a.501.501.0 00-.223.416v4.667c0 .167.084.323.223.416l7 4.667a.5.5.0 00.554.0l7-4.667a.501.501.0 00.223-.416V6.167a.501.501.0 00-.223-.416zM7.5 10.232 4.901 8.5 7.5 6.768 10.099 8.5 7.5 10.232zM8 5.899V2.434l5.599 3.732L11 7.898l-3-2zm-1 0-3 2-2.599-1.732L7 2.435V5.9zM3.099 8.5 1 9.899V7.101L3.099 8.5zM4 9.101l3 2v3.465l-5.599-3.732L4 9.102zm4 2 3-2 2.599 1.732L8 14.565V11.1zM11.901 8.5 14 7.101v2.798L11.901 8.5z"/></g></symbol><symbol id="icon-dribbble" viewBox="0 0 16 16"><g><path d="M8 16c-4.412.0-8-3.588-8-8s3.587-8 8-8c4.412.0 8 3.587 8 8s-3.588 8-8 8zm6.747-6.906c-.234-.075-2.116-.634-4.256-.291a29.7 29.7.0 011.328 4.872 6.845 6.845.0 002.928-4.581zM10.669 14.3c-.103-.6-.497-2.688-1.456-5.181-.016.006-.031.009-.044.016-3.856 1.344-5.241 4.016-5.362 4.266a6.807 6.807.0 006.863.9zm-7.747-1.722c.156-.266 2.031-3.369 5.553-4.509a7.04 7.04.0 01.269-.081 24.04 24.04.0 00-.553-1.159c-3.409 1.022-6.722.978-7.022.975-.003.069-.003.138-.003.209.0 1.753.666 3.356 1.756 4.566zM1.313 6.609c.306.003 3.122.016 6.319-.831A43.092 43.092.0 005.098 1.825 6.854 6.854.0 001.314 6.609zM6.4 1.366a36.612 36.612.0 012.55 4c2.431-.909 3.459-2.294 3.581-2.469A6.799 6.799.0 006.4 1.366zm6.891 2.325c-.144.194-1.291 1.663-3.816 2.694.159.325.313.656.453.991.05.119.1.234.147.353 2.275-.284 4.534.172 4.759.219A6.816 6.816.0 0013.29 3.692z"/></g></symbol><symbol id="icon-facebook" viewBox="0 0 16 16"><g><path d="M9.5 3H12V0H9.5C7.57.0 6 1.57 6 3.5V5H4v3h2v8h3V8h2.5l.5-3H9V3.5c0-.271.229-.5.5-.5z"/></g></symbol><symbol id="icon-feed" viewBox="0 0 16 16"><g><path d="M2.13 11.733c-1.175.0-2.13.958-2.13 2.126.0 1.174.955 2.122 2.13 2.122a2.126 2.126.0 002.133-2.122A2.133 2.133.0 002.13 11.733zM.002 5.436v3.067c1.997.0 3.874.781 5.288 2.196a7.45 7.45.0 012.192 5.302h3.08c0-5.825-4.739-10.564-10.56-10.564zM.006.0v3.068C7.128 3.068 12.924 8.87 12.924 16H16C16 7.18 8.824.0.006.0z"/></g></symbol><symbol id="icon-flickr" viewBox="0 0 16 16"><g><path d="M0 8.5a3.5 3.5.0 117 0 3.5 3.5.0 01-7 0zm9 0a3.5 3.5.0 117 0 3.5 3.5.0 01-7 0z"/></g></symbol><symbol id="icon-github" viewBox="0 0 16 16"><g><path d="M8 .198A8 8 0 005.471 15.789c.4.074.547-.174.547-.385.0-.191-.008-.821-.011-1.489-2.226.484-2.695-.944-2.695-.944-.364-.925-.888-1.171-.888-1.171-.726-.497.055-.486.055-.486.803.056 1.226.824 1.226.824.714 1.223 1.872.869 2.328.665.072-.517.279-.87.508-1.07-1.777-.202-3.645-.888-3.645-3.954.0-.873.313-1.587.824-2.147-.083-.202-.357-1.015.077-2.117.0.0.672-.215 2.201.82A7.672 7.672.0 018 4.066c.68.003 1.365.092 2.004.269 1.527-1.035 2.198-.82 2.198-.82.435 1.102.162 1.916.079 2.117.513.56.823 1.274.823 2.147.0 3.073-1.872 3.749-3.653 3.947.287.248.543.735.543 1.481.0 1.07-.009 1.932-.009 2.195.0.213.144.462.55.384A8 8 0 008.001.196z"/></g></symbol><symbol id="icon-gitlab" viewBox="0 0 28 28"><g><path d="M1.625 11.031 14 26.89.437 17.046a1.092 1.092.0 01-.391-1.203l1.578-4.813zm7.219.0h10.313L14.001 26.89zM5.75 1.469l3.094 9.562H1.625l3.094-9.562a.548.548.0 011.031.0zm20.625 9.562 1.578 4.813a1.09 1.09.0 01-.391 1.203l-13.563 9.844 12.375-15.859zm0 0h-7.219l3.094-9.562a.548.548.0 011.031.0z"/></g></symbol><symbol id="icon-google-plus" viewBox="0 0 16 16"><g><path d="M5.091 7.147v1.747h2.888c-.116.75-.872 2.197-2.888 2.197-1.737.0-3.156-1.441-3.156-3.216s1.419-3.216 3.156-3.216c.991.0 1.65.422 2.028.784L8.5 4.112c-.888-.828-2.037-1.331-3.409-1.331C2.275 2.784.0 5.059.0 7.875s2.275 5.091 5.091 5.091c2.937.0 4.888-2.066 4.888-4.975.0-.334-.037-.591-.081-.844H5.092zM16 7h-1.5V5.5H13V7h-1.5v1.5H13V10h1.5V8.5H16z"/></g></symbol><symbol id="icon-instagram" viewBox="0 0 22 22"><g><path d="M15.445.0H6.554A6.559 6.559.0 000 6.554v8.891A6.559 6.559.0 006.554 22h8.891a6.56 6.56.0 006.554-6.555V6.554A6.557 6.557.0 0015.445.0zm4.342 15.445a4.343 4.343.0 01-4.342 4.342H6.554a4.341 4.341.0 01-4.341-4.342V6.554a4.34 4.34.0 014.341-4.341h8.891a4.342 4.342.0 014.341 4.341l.001 8.891z"/><path d="M11 5.312A5.693 5.693.0 005.312 11 5.694 5.694.0 0011 16.688 5.694 5.694.0 0016.688 11 5.693 5.693.0 0011 5.312zm0 9.163a3.475 3.475.0 11-.001-6.95 3.475 3.475.0 01.001 6.95zm5.7-10.484a1.363 1.363.0 11-1.364 1.364c0-.752.51-1.364 1.364-1.364z"/></g></symbol><symbol id="icon-linkedin" viewBox="0 0 16 16"><g><path d="M6 6h2.767v1.418h.04C9.192 6.727 10.134 6 11.539 6 14.46 6 15 7.818 15 10.183V15h-2.885v-4.27c0-1.018-.021-2.329-1.5-2.329-1.502.0-1.732 1.109-1.732 2.255V15H6V6zM1 6h3v9H1V6zM4 3.5A1.5 1.5.0 11.999 3.499 1.5 1.5.0 014 3.5z"/></g></symbol><symbol id="icon-mail" viewBox="0 0 22 18"><g><path fill="#000" d="M0 17.225V.776h22v16.447H0v.002zm3.011-1.815h15.978l-5.111-5.115L11 13.179l-2.877-2.883-5.112 5.114zm-1.216-1.275 5.077-5.09L1.795 3.98v10.155zm13.332-5.09 5.079 5.09V3.979l-5.079 5.066zm-4.126 1.588 8.022-8.027-16.045-.001 8.023 8.028z"/></g></symbol><symbol id="icon-medium" viewBox="0 0 24 24"><g><path d="M22.085 4.733 24 2.901V2.5h-6.634l-4.728 11.768L7.259 2.5H.303v.401L2.54 5.594c.218.199.332.49.303.783V16.96c.069.381-.055.773-.323 1.05L0 21.064v.396h7.145v-.401l-2.52-3.049a1.244 1.244.0 01-.347-1.05V7.806l6.272 13.659h.729l5.393-13.659v10.881c0 .287.0.346-.188.534l-1.94 1.877v.402h9.412v-.401l-1.87-1.831a.556.556.0 01-.214-.534V5.267a.554.554.0 01.213-.534z"/></g></symbol><symbol id="icon-npm" viewBox="0 0 16 16"><g><path d="M0 0v16h16V0H0zm13 13h-2V5H8v8H3V3h10v10z"/></g></symbol><symbol id="icon-pinterest" viewBox="0 0 16 16"><g><path d="M8 1.069A6.93 6.93.0 005.475 14.453c-.059-.547-.116-1.391.025-1.988.125-.541.813-3.444.813-3.444s-.206-.416-.206-1.028c0-.963.559-1.684 1.253-1.684.591.0.878.444.878.975.0.594-.378 1.484-.575 2.306-.166.691.344 1.253 1.025 1.253 1.231.0 2.178-1.3 2.178-3.175.0-1.659-1.194-2.819-2.894-2.819-1.972.0-3.128 1.478-3.128 3.009.0.597.228 1.234.516 1.581.056.069.066.128.047.2a95.89 95.89.0 01-.194.787c-.031.128-.1.153-.231.094-.866-.403-1.406-1.669-1.406-2.684.0-2.188 1.587-4.194 4.578-4.194 2.403.0 4.272 1.712 4.272 4.003.0 2.388-1.506 4.313-3.597 4.313-.703.0-1.362-.366-1.588-.797.0.0-.347 1.322-.431 1.647-.156.603-.578 1.356-.862 1.816a6.93 6.93.0 008.984-6.622A6.931 6.931.0 008.001 1.068z"/></g></symbol><symbol id="icon-search" viewBox="0 0 16 16"><g><path d="M15.504 13.616l-3.79-3.223c-.392-.353-.811-.514-1.149-.499a6 6 0 10-.672.672c-.016.338.146.757.499 1.149l3.223 3.79c.552.613 1.453.665 2.003.115s.498-1.452-.115-2.003zM6 10a4 4 0 110-8 4 4 0 010 8z"/></g></symbol><symbol id="icon-strava" viewBox="0 0 24 24"><g><path d="M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599 2.836 5.598h4.172L10.463.0l-7 13.828h4.169"/></g></symbol><symbol id="icon-tumblr" viewBox="0 0 16 16"><g><path d="M9.001 7v3.659c0 .928-.012 1.463.086 1.727.098.262.342.534.609.691.354.212.758.318 1.214.318.81.0 1.289-.107 2.09-.633v2.405a9.089 9.089.0 01-1.833.639A7.93 7.93.0 019.369 16a4.9 4.9.0 01-1.725-.276 4.195 4.195.0 01-1.438-.79c-.398-.343-.672-.706-.826-1.091s-.23-.944-.23-1.676V6.556H3.003V4.29c.628-.204 1.331-.497 1.778-.877a4.386 4.386.0 001.08-1.374C6.133 1.505 6.32.825 6.422.0h2.579v4H13v3H9.001z"/></g></symbol><symbol id="icon-twitter" viewBox="0 0 16 16"><g><path d="M16 3.538a6.461 6.461.0 01-1.884.516 3.301 3.301.0 001.444-1.816 6.607 6.607.0 01-2.084.797 3.28 3.28.0 00-2.397-1.034A3.28 3.28.0 007.882 6.029 9.321 9.321.0 011.116 2.598a3.284 3.284.0 001.015 4.381A3.301 3.301.0 01.643 6.57v.041A3.283 3.283.0 003.277 9.83a3.291 3.291.0 01-1.485.057 3.293 3.293.0 003.066 2.281 6.586 6.586.0 01-4.862 1.359 9.286 9.286.0 005.034 1.475c6.037.0 9.341-5.003 9.341-9.341.0-.144-.003-.284-.009-.425a6.59 6.59.0 001.637-1.697z"/></g></symbol><symbol id="icon-vimeo" viewBox="0 0 16 16"><g><path d="M15.994 4.281c-.072 1.556-1.159 3.691-3.263 6.397-2.175 2.825-4.016 4.241-5.522 4.241-.931.0-1.722-.859-2.366-2.581-.431-1.578-.859-3.156-1.291-4.734-.478-1.722-.991-2.581-1.541-2.581-.119.0-.538.253-1.256.753l-.753-.969c.791-.694 1.569-1.388 2.334-2.081 1.053-.909 1.844-1.387 2.372-1.438 1.244-.119 2.013.731 2.3 2.553.309 1.966.525 3.188.647 3.666.359 1.631.753 2.447 1.184 2.447.334.0.838-.528 1.509-1.588.669-1.056 1.028-1.862 1.078-2.416.097-.912-.262-1.372-1.078-1.372a2.98 2.98.0 00-1.184.263c.787-2.575 2.287-3.825 4.506-3.753 1.641.044 2.416 1.109 2.322 3.194z"/></g></symbol><symbol id="icon-wordpress" viewBox="0 0 16 16"><g><path d="M2 8c0 2.313 1.38 4.312 3.382 5.259L2.52 5.622A5.693 5.693.0 002 8zm10.05-.295c0-.722-.266-1.222-.495-1.612-.304-.482-.589-.889-.589-1.371.0-.537.418-1.037 1.008-1.037.027.0.052.003.078.005A6.064 6.064.0 008 2.156 6.036 6.036.0 002.987 4.79c.141.004.274.007.386.007.627.0 1.599-.074 1.599-.074.323-.018.361.444.038.482.0.0-.325.037-.687.055l2.185 6.33 1.313-3.835-.935-2.495a12.304 12.304.0 01-.629-.055c-.323-.019-.285-.5.038-.482.0.0.991.074 1.58.074.627.0 1.599-.074 1.599-.074.323-.018.362.444.038.482.0.0-.326.037-.687.055l2.168 6.282.599-1.947c.259-.809.457-1.389.457-1.889zm-3.945.806-1.8 5.095a6.148 6.148.0 003.687-.093.52.52.0 01-.043-.081L8.105 8.511zm5.16-3.315c.026.186.04.386.04.601.0.593-.114 1.259-.456 2.093l-1.833 5.16c1.784-1.013 2.983-2.895 2.983-5.051a5.697 5.697.0 00-.735-2.803zM8 0a8 8 0 100 16A8 8 0 008 0zm0 15A7 7 0 118 1a7 7 0 010 14z"/></g></symbol><symbol id="icon-youtube" viewBox="0 0 16 16"><g><path d="M15.841 4.8s-.156-1.103-.637-1.587c-.609-.637-1.291-.641-1.603-.678-2.237-.163-5.597-.163-5.597-.163h-.006s-3.359.0-5.597.163c-.313.038-.994.041-1.603.678C.317 3.697.164 4.8.164 4.8S.005 6.094.005 7.391v1.213c0 1.294.159 2.591.159 2.591s.156 1.103.634 1.588c.609.637 1.409.616 1.766.684 1.281.122 5.441.159 5.441.159s3.363-.006 5.6-.166c.313-.037.994-.041 1.603-.678.481-.484.637-1.588.637-1.588s.159-1.294.159-2.591V7.39c-.003-1.294-.162-2.591-.162-2.591zm-9.494 5.275V5.578l4.322 2.256-4.322 2.241z"/></g></symbol></svg>
<header class=l-header>
<p class="c-title p-title"><a href=https://dwmkerr.com/ class=p-title__link>dwmkerr.com</a></p><p class=p-subtitle>
Articles on the craft of software development. No ads, no sponsored content.
</p></header><main id=main class=l-main>
<article class=p-article>
<header>
<h1>Supercharge your Java Projects with Conventional Commits, Semantic Versioning and Semantic Releases</h1><div>
<div class=c-meta>
Posted on
<time datetime=2020-05-17T00:00:00Z>
May 17, 2020
</time>
|
2288 words
|
~11 mins
</div></div><a href=https://dwmkerr.com/tags/java class=c-tag>Java</a>
<a href=https://dwmkerr.com/tags/engineering class=c-tag>Engineering</a>
<a href=https://dwmkerr.com/tags/devops class=c-tag>Devops</a>
<a href=https://dwmkerr.com/tags/codeproject class=c-tag>CodeProject</a>
</div></header><section id=js-article class=p-article__body>
<p>In this article we&rsquo;ll look at a few simple techniques which can really supercharge your Java project and make them much easier to work with!</p><ul>
<li><a href=#semantic-versioning>Semantic Versioning</a>
<ul>
<li><a href=#why-does-this-matter>Why Does This Matter?</a></li><li><a href=#the-semantic-versioning-specification>The Semantic Versioning Specification</a></li><li><a href=#using-semantic-versions>Using Semantic Versions</a></li><li><a href=#the-challenge-of-semantic-versions>The Challenge of Semantic Versions</a></li></ul></li><li><a href=#conventional-commits>Conventional Commits</a></li><li><a href=#time-for-magic>Time for Magic</a>
<ul>
<li><a href=#enforcing-conventional-commits-with-git-hooks>Enforcing Conventional Commits with Git Hooks</a></li><li><a href=#how-the-hook-works>How the Hook Works</a></li></ul></li><li><a href=#creating-the-initial-release>Creating the Initial Release</a></li><li><a href=#go-forth-and-devops>Go Forth And DevOps</a></li><li><a href=#the-gradle-version>The Gradle Version</a></li><li><a href=#thats-it>That&rsquo;s It</a></li></ul><p><strong>tl;dr</strong> If you know the concepts, then just jump straight to my fork of <code>standard-version</code> at <a href=https://github.com/dwmkerr/standard-version><code>github.com/dwmkerr/standard-version</code></a>. It adds support for Java projects. I am currently trying to get it into the mainline, so if you like this, please comment on the <a href=https://github.com/conventional-changelog/standard-version/pull/591>Pull Request</a> here. <strong>tl;dr end!</strong></p><h2 id=semantic-versioning>Semantic Versioning</h2><p>First, let&rsquo;s talk about the idea of a <em>Semantic Version</em>. A semantic version is nothing more than a versioning scheme you will probably be familiar with, where versions look like this:</p><pre tabindex=0><code>1.2.3
</code></pre><p>The only thing special about a <em>Semantic Version</em> is that we give a very specific meaning to each part of the version. In short:</p><ul>
<li><code>1</code> is the <em>major</em> part of the version</li><li><code>2</code> is the <em>minor</em> part of the version</li><li><code>3</code> is the <em>patch</em> part of the version</li></ul><p>Now we give <em>semantics</em> (meaning and context) to these parts:</p><p><strong>Major</strong></p><p>A <em>major</em> version number change means something big has changed, and the API of the software is different to the earlier version. Essentially, this is a potentially <em>breaking</em> change, so you should only use this new version after carefully reading about the changes.</p><p><strong>Minor</strong></p><p>A <em>minor</em> version number change means that something has been added or changed, which affects the functionality of the code, but in a <em>non breaking</em> way. An example would be the addition of a new API. That won&rsquo;t affect existing users, so they can generally safely upgrade minor versions without too much risk.</p><p><strong>Patch</strong></p><p>A <em>patch</em> version number change means something really inconsequential to the user of the code has changed. It might be new documentation, better logging, but it is generally not a <em>functional</em> change.</p><h3 id=why-does-this-matter>Why Does This Matter?</h3><p>If we have Semantic Versions, we can be a lot more sure about <em>when it is safe to upgrade</em>. If we see a <em>major</em> version change, we know we need to be careful. <em>Minor</em> changes might need attention, and <em>patches</em> are almost always going to be safe.</p><p>Managing dependencies and keeping them up to date is hard in software development, and one of the reasons people are wary of updating dependencies is that <em>they don&rsquo;t know if they upgrade will break their code</em>.</p><p>Semantic Versioning tries to bring a little order to this chaotic world.</p><h3 id=the-semantic-versioning-specification>The Semantic Versioning Specification</h3><p>There is a detailed specification for semantic versioning, which also covers more sophisticated cases, you can find it here:</p><p><a href=https://semver.org/>https://semver.org/</a></p><p>I&rsquo;d suggest this is recommend reading for <em>any</em> software engineer!</p><h3 id=using-semantic-versions>Using Semantic Versions</h3><p>Now the easiest way to start with semantic versioning is to simply adhere to the spec! For example, if you make a change which could break something for users, bump the <em>major</em> part of the version.</p><p>But, things aren&rsquo;t all that easy&mldr;</p><h3 id=the-challenge-of-semantic-versions>The Challenge of Semantic Versions</h3><p>The challenge is this. Imagine you are cutting a new release of your code and many people have contributed. Some bug fixes, some patches, some documentation. How do you look through all of those changes and decide how to appropriately change the version number?</p><p>To solve this problem, say hello to <em>Conventional Commits</em>.</p><h2 id=conventional-commits>Conventional Commits</h2><p>If you have a commit history like this:</p><pre tabindex=0><code>Updated the users API
Bugfix
trying the build again, got it working
Bugfix: [JIRA-21] fixed that issue
you can now get user&#39;s friends with this change
</code></pre><p>Then it is <em>very</em> hard to reason about what is going on. What about if the commit history looked like this?</p><pre tabindex=0><code>feat(users): [#12] fetching users returns their avatar url
fix(users): [#45] display names with emojis return correctly
build(cicd): update the expired deploy key
fix(docs): [#22] fix broken links to the javadocs
feat(users): [#49] users api optionally returns friends, non-breaking
</code></pre><p>It&rsquo;s much easier to see what each change means, at least at a high level.</p><p>By having some kind of standard for commit messages, we can do a lot. We can:</p><ul>
<li>Classify changes by type (such as a feature or fix)</li><li>Include a clear description of the change</li><li>Use a convention to indicate a breaking change</li><li>Link to a ticketing system</li></ul><p>Just like semantic versioning, conventional commits have a specification too:</p><p><a href=https://www.conventionalcommits.org/en/v1.0.0/>https://www.conventionalcommits.org/en/v1.0.0/</a></p><h2 id=time-for-magic>Time for Magic</h2><p>Now if we have conventional commits, and want to use semantic versions, we can actually skip the whole process of looking over a commit history to create a new semantic version - we can automate it.</p><p>We can even automate the process of creating a &lsquo;changelog&rsquo;, a list of each change which comes in each version. There&rsquo;s an <em>excellent</em> library which does this, called <code>standard-version</code>:</p><p><a href=https://github.com/conventional-changelog/standard-version>https://github.com/conventional-changelog/standard-version</a></p><p>It&rsquo;s maintained by the same group behind conventional commits. The only problem? It only works for JavaScript projects (unless you are willing to write custom code which can be complex).</p><p>But I&rsquo;ve updated the library to support Maven projects and Gradle projects, so you can use it for Java now as well!</p><p>Let&rsquo;s see it in action. Here&rsquo;s a very simple Java library built with Maven:</p><p><a href=https://github.com/dwmkerr/java-maven-standard-version-sample>https://github.com/dwmkerr/java-maven-standard-version-sample</a></p><p>This library has no changelog, no tags, no version data at all except for <code>0.1.0</code> in the <code>pom.xml</code> file.</p><p>Now if I was to clone the library, make a change and make a commit, which <em>didn&rsquo;t</em> follow the conventional commit spec, we&rsquo;ll just see the usual success message:</p><img src=./images/bad-commit-message.png alt="Bad commit message" width=800px>
<p>This is a problem; we want to <em>enforce</em> conventional commits.</p><h3 id=enforcing-conventional-commits-with-git-hooks>Enforcing Conventional Commits with Git Hooks</h3><p>Git has a powerful &lsquo;hooks&rsquo; facility, which let you run logic at key points in operations. This is a <em>massive</em> topic on its own, so we&rsquo;re not going to go into lots of details, but if you are interested you can read about them here:</p><p><a href=https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks>https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks</a></p><p>Now the issue with Git Hooks is that they are <em>per user</em> - if I add a hook to my <code>.git</code> folder, no one else will get it. We want the same hooks for <em>all</em> users.</p><p>There are a few ways to get around this. You can set up server side hooks (which could reject a push if it has an invalid commit message), but this isn&rsquo;t easy to do (and with some providers, like GitHub for public projects, not even available as an option). Also, we want fast feedback, so if I make a bad commit message, it fails straight away and I can fix it.</p><p>The way I suggest getting around this is this:</p><ol>
<li>Create a <code>.githooks</code> folder in your repo</li><li>Instruct people to configure the git repo to look for hooks there</li></ol><p>That way there are no global changes, only project specific ones. We still need to make sure the developer sets up the hooks though! You&rsquo;ll notice in my sample project&rsquo;s <a href=https://github.com/dwmkerr/java-maven-standard-version-sample#developer-guide><code>README.md</code></a> file the first thing I do is instruct people to setup the hooks:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>git config core.hooksPath .githooks
</span></span></code></pre></div><p>Let&rsquo;s see how the same operation would look if we&rsquo;d setup the hook first:</p><img src=./images/git-hook-bad-message.png alt="Bad commit message with hook" width=800px>
<p>Our hook has fired off and told us we&rsquo;ve not used a conventional commit message - it even let&rsquo;s us know where to go to find out more.</p><p>Let&rsquo;s try a message which should work, as it meets the standard:</p><img src=./images/git-hook-good-message.png alt="Good commit message with hook" width=800px>
<p>Awesome! We&rsquo;ve been informed that our message meets the standard (useful to actually remind us that this is being checked!) and the commit has succeeded!</p><p>Remember; we only need to setup the hooks once - it&rsquo;s a one time activity.</p><h3 id=how-the-hook-works>How the Hook Works</h3><p>Hooks are just shell scripts. You can write them in Ruby, Python, whatever. I have written this one in pure Bash because it&rsquo;s really just checking a regex, which Bash is more than capable of. Also, I can&rsquo;t be sure the developer will have Ruby or another tool on their machine.</p><p>The hook is as simple as this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#75715e>#!/usr/bin/env bash
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#75715e># Create a regex for a conventional commit.</span>
</span></span><span style=display:flex><span>convetional_commit_regex<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;^(build|chore|ci|docs|feat|fix|perf|refactor|revert|style|test)(\([a-z \-]+\))?!?: .+</span>$<span style=color:#e6db74>&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Get the commit message (the parameter we&#39;re given is just the path to the</span>
</span></span><span style=display:flex><span><span style=color:#75715e># temporary file which holds the message).</span>
</span></span><span style=display:flex><span>commit_message<span style=color:#f92672>=</span><span style=color:#66d9ef>$(</span>cat <span style=color:#e6db74>&#34;</span>$1<span style=color:#e6db74>&#34;</span><span style=color:#66d9ef>)</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Check the message, if we match, all good baby.</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>if</span> <span style=color:#f92672>[[</span> <span style=color:#e6db74>&#34;</span>$commit_message<span style=color:#e6db74>&#34;</span> <span style=color:#f92672>=</span>~ $convetional_commit_regex <span style=color:#f92672>]]</span>; <span style=color:#66d9ef>then</span>
</span></span><span style=display:flex><span>   echo -e <span style=color:#e6db74>&#34;\e[32mCommit message meets Conventional Commit standards...\e[0m&#34;</span>
</span></span><span style=display:flex><span>   exit <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>fi</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Uh-oh, this is not a conventional commit, show an example and link to the spec.</span>
</span></span><span style=display:flex><span>echo -e <span style=color:#e6db74>&#34;\e[31mThe commit message does not meet the Conventional Commit standard\e[0m&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;An example of a valid message is: &#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;  feat(login): add the &#39;remember me&#39; button&#34;</span>
</span></span><span style=display:flex><span>echo <span style=color:#e6db74>&#34;More details at: https://www.conventionalcommits.org/en/v1.0.0/#summary&#34;</span>
</span></span><span style=display:flex><span>exit <span style=color:#ae81ff>1</span>
</span></span></code></pre></div><p>The only really tricky bit is the regex, and the weird <code>\e[32</code> type characters which are used to set the colours. You might find it easier to write your hooks in a proper programming language - and for anything more complex I&rsquo;d suggest that makes far more sense! But if a bit of Bash will do the trick, there&rsquo;s nothing wrong with that.</p><p>As a side-note, if you are into Bash and the shell, check out my online <a href=https://effective-shell.com>Effective Shell</a> book.
git config core.hooksPath .githooks</p><h2 id=creating-the-initial-release>Creating the Initial Release</h2><p>Now the chances are, if you are interested in this technique, you&rsquo;ve probably got an existing project you want to use it on. It probably doesn&rsquo;t have a changelog or conventional commits. That&rsquo;s OK, just start from now.</p><p>Here&rsquo;s how we&rsquo;d start using the <code>standard-version</code> library to manage our versions. I&rsquo;ve added a new API to the <a href=https://github.com/dwmkerr/java-maven-standard-version-sample/tree/release><code>release</code></a> branch (to keep <code>master</code> clean for people reading the sample) and committed it.</p><p>Now lets actually create our changelog:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>npx @dwmkerr/standard-version --first-release --packageFiles pom.xml --bumpFiles pom.xml
</span></span></code></pre></div><img src=./images/first-release.png alt="First release" width=800px>
<p>Now it&rsquo;s a pain I know, but you need <a href=https://nodejs.org/en/download/>Node.js</a> installed for this to work. The <code>standard-version</code> library is built on node, that&rsquo;s what is used to do all of the logic around writing a changelog and working out what the version bump should be. You also have to use my fork <code>@dwmkerr/standard-version</code> rather than the main version, because at the time of writing my pull request which adds support for <code>pom.xml</code> files is not yet merged.</p><p>What has happened here is that the <code>standard-version</code> tool has <em>not</em> changed the version number. We told it this is the <code>first-release</code>, meaning we haven&rsquo;t published yet, so there&rsquo;s no need to create a new number. What is <em>has</em> done is given us a changelog and told use how to push the tags and code. If we push, we can now see the changelog:</p><img src=./images/changelog-v1.png alt="Changelog v1" width=800px>
<p>See how we get a changelog showing the changes, the version and the date? We even have links to the commits for each key change!</p><p>If we&rsquo;d linked the message to GitHub Issue numbers it&rsquo;d automatically have links to the issues too!</p><p>Now in this code I deliberately made a mistake - the test for the <code>Goodbye</code> api is a copy and paste of the <code>Hello</code> test! And the <code>Goodbye</code> api has a spelling mistake. Let&rsquo;s fix this and cut a new release.</p><p>I&rsquo;ve made the change on the <code>release</code> branch, now I&rsquo;ll run <code>standard-version</code> again:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>npx @dwmkerr/standard-version --packageFiles pom.xml --bumpFiles pom.xml
</span></span></code></pre></div><img src=./images/second-release.png alt="Second release" width=800px>
<p>Note that there was no need for the <code>--first-release</code> flag.</p><p>Now this time, a new version has been generated. This was a <code>fix</code> commit, so it has made it a <em>minor</em> version bump. If we needed to make it a breaking change, we can use a message with an exclamation after the type, such as <code>fix(goodbye)!: fix the typo</code>. Check the <code>standard-version</code> docs for more about this.</p><p>Finally, let&rsquo;s look at our new changelog:</p><img src=./images/second-changelog.png alt="Second changelog" width=800px>
<p>We have even more info now - we have a link to the tag. This is <em>incredibly</em> useful for managing releases.</p><p>The icing on the cake? Let&rsquo;s look at the <code>pom.xml</code>:</p><img src=./images/updated-pom.png alt="Updated pom.xml" width=800px>
<p>Note that <em>the version has been updated</em>. <code>standard-release</code> is keeping our Git Tags and our Java Library Version numbers <em>automatically in sync</em>.</p><p>Once you&rsquo;ve started doing this and seen it in action for a while, you&rsquo;ll wonder how you lived without it!</p><h2 id=go-forth-and-devops>Go Forth And DevOps</h2><p>This is just the beginning! Think of all the cool things we can do with this in place, here&rsquo;s just a few:</p><ul>
<li>Update our build pipeline so that when we merge into <code>master</code> we automatically run <code>standard-version</code></li><li>Update our build pipeline so that when a new version tag is added, we automatically publish the library</li><li>Send out a slack notification with the changelog when a new version is committed</li><li>Share the changelog with our consumers as our libraries are updated</li></ul><p>With these basic building blocks:</p><ul>
<li>Conventional Commits</li><li>Semantic Versioning</li><li>Enforcing of Commit Standards</li><li>Usage of the <code>standard-release</code> tool</li></ul><p>We have created a very powerful way to manage what is actually a highly complex process. We&rsquo;ve introduced almost no additional complexity, just a few guidelines for developers.</p><h2 id=the-gradle-version>The Gradle Version</h2><p>It&rsquo;s basically the same technique for Gradle, you just tell <code>standard-version</code> to hit your <code>build.gradle</code> file;</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>npx @dwmkerr/standard-version --packageFiles build.gradle --bumpFiles build.gradle
</span></span></code></pre></div><p>There&rsquo;s an accompanying sample project at:</p><p><a href=https://github.com/dwmkerr/java-gradle-standard-version-sample>github.com/dwmkerr/java-gradle-standard-version-sample</a></p><p>This is the same as the Maven version in that the <code>master</code> branch has no <code>standard-version</code> code or changelogs, just open the <a href=https://github.com/dwmkerr/java-gradle-standard-version-sample/tree/release><code>release</code></a> branch to see what it looks like after we&rsquo;ve applied the same techniques as we did to the Maven version.</p><h2 id=thats-it>That&rsquo;s It</h2><p>There&rsquo;s a whole world of libraries for this. <a href=https://github.com/commitizen/cz-cli><code>commitizen</code></a> which helps you write conventional commit messages for example. But I found very little for Java. If you find this useful, please do chip in on the pull request here:</p><p><a href=https://github.com/conventional-changelog/standard-version/pull/591>https://github.com/conventional-changelog/standard-version/pull/591</a></p><p>As it would be great to add it to the mainline. I&rsquo;m also just finishing off the update which adds support for Gradle.</p><p>As always, questions, comments, suggestions, rants, anything are welcome!</p></section><footer>
<div id=disqus_thread></div><script>var disqus_shortname="dwmkerr";(function(){var e=document,t=e.createElement("script");t.src="https://"+disqus_shortname+".disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><nav class="p-pagination c-pagination">
<div class=c-pagination__ctrl>
<div class=c-pagination__newer>
<a href=https://dwmkerr.com/tips-for-cka/>Newer</a>
</div><div class=c-pagination__older>
<a href=https://dwmkerr.com/effective-shell-for-beginners/>Older</a>
</div></div></nav><section class=p-related>
<h3>See Also</h3><div class=p-related__list>
<div class="swiper swiper-container">
<ul class=swiper-wrapper>
<li class="p-related__item swiper-slide">
<a href=/effective-shell-for-beginners/>
<span>Effective Shell for Beginners</span>
</a>
</li><li class="p-related__item swiper-slide">
<a href=/effective-shell-7-shell-commands/>
<span>Effective Shell Part 7: The Subtleties of Shell Commands</span>
</a>
</li><li class="p-related__item swiper-slide">
<a href=/effective-shell-6-job-control/>
<span>Effective Shell Part 6: Everything You Don't Need To Know About Job Control</span>
</a>
</li><li class="p-related__item swiper-slide">
<a href=/effective-shell-part-5-understanding-the-shell/>
<span>Effective Shell Interlude: Understanding the Shell</span>
</a>
</li><li class="p-related__item swiper-slide">
<a href=/manipulating-istio-and-other-custom-kubernetes-resources-in-golang/>
<span>Manipulating Istio and other Custom Kubernetes Resources in Golang</span>
</a>
</li><li class="p-related__item swiper-slide">
<a href=/patching-kubernetes-resources-in-golang/>
<span>Patching Kubernetes Resources in Golang</span>
</a>
</li></ul></div><div class=related-prev></div><div class=related-next></div></div></section><aside class=p-author>
<div class="c-avatar p-author__avatar">
<img alt="Author Avatar" src=/images/avatar.jpeg>
</div><div class=p-author__body>
<p class="c-title p-author__name">Dave Kerr</p><p>Climber, Coder, Technology Consultant. Views expressed are my own.</p></div></aside></footer></article></main><nav class="l-nav p-menu">
<ul class=p-menu__lists>
<li class=p-menu__listitem>
<a href=/>Blog</a>
</li><li class=p-menu__listitem>
<a href=/page/speaking/>Speaking</a>
</li><li class=p-menu__listitem>
<a href=/page/about/>About</a>
</li></ul></nav><footer class=l-footer>
<ul class=c-links>
<li class=c-links__item>
<a href=https://twitter.com/dwmkerr target=_blank><svg viewBox="0 0 64 64" class="c-links__icon"><title>twitter</title><use xlink:href="#icon-twitter"/></svg>
</a>
</li><li class=c-links__item>
<a href=https://github.com/dwmkerr target=_blank><svg viewBox="0 0 64 64" class="c-links__icon"><title>github</title><use xlink:href="#icon-github"/></svg>
</a>
</li><li class=c-links__item>
<a href=https://www.npmjs.com/dwmkerr target=_blank><svg viewBox="0 0 64 64" class="c-links__icon"><title>npm</title><use xlink:href="#icon-npm"/></svg>
</a>
</li><li class=c-links__item>
<a href=https://linkedin.com/in/dwmkerr target=_blank><svg viewBox="0 0 64 64" class="c-links__icon"><title>linkedin</title><use xlink:href="#icon-linkedin"/></svg>
</a>
</li></ul><p class=p-copyright>
Copright &copy; Dave Kerr
</p></footer><script type=text/javascript src=https://dwmkerr.com/js/bundle.js defer></script>
</body></html>