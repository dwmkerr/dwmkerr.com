<!doctype html><html prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Getting Started with React & ES6 &#183; Dave Kerr</title><meta name=description content="Feeling like having a go with Facebook's hugely popular React framework but not sure where to start?
In this post I'm going to build a simple React application from scratch - using ECMAScript 6.
We'll put together the bare minimum skeleton of a site and keep the folder structure free of noise and clutter so that you can focus on the app code and not the tooling!
The simple app we'll build is at github."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=generator content="Hugo 0.61.0"><meta name=robots content="index,follow"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Getting Started with React & ES6"><meta property="og:description" content="Feeling like having a go with Facebook's hugely popular React framework but not sure where to start?
In this post I'm going to build a simple React application from scratch - using ECMAScript 6.
We'll put together the bare minimum skeleton of a site and keep the folder structure free of noise and clutter so that you can focus on the app code and not the tooling!
The simple app we'll build is at github."><meta property="og:type" content="article"><meta property="og:url" content="http://dwmkerr.com/getting-started-with-react/"><link rel=stylesheet href=http://dwmkerr.com/dist/styles.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous></head><body><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-41728580-1','auto');ga('set','anonymizeIp',true);ga('send','pageview');}</script><div id=wrapper><header class=site-header><div class=container><div class=site-title-wrapper><h1 class=site-title><a title=dwmkerr.com href=http://dwmkerr.com/>dwmkerr.com</a></h1><a class=button-square href=http://dwmkerr.com/index.xml><i class="fa fa-rss"></i></a><a class="button-square button-social hint--top" data-hint=Twitter title=Twitter href=https://twitter.com/dwmkerr rel=me><i class="fa fa-twitter"></i></a><a class="button-square button-social hint--top" data-hint=Github title=Github href=https://github.com/dwmkerr rel=me><i class="fa fa-github-alt"></i></a><a class="button-square button-social hint--top" data-hint="Stack Overflow" title="Stack Overflow" href=https://stackoverflow.com/users/1189164/dave-kerr rel=me><i class="fa fa-stack-overflow"></i></a><a class="button-square button-social hint--top" data-hint=LinkedIn title=LinkedIn href=https://www.linkedin.com/in/dwmkerr/ rel=me><i class="fa fa-linkedin"></i></a></div><ul class=site-nav><li class=site-nav-item><a title=Blog href=/>Blog</a></li><li class=site-nav-item><a title=Speaking href=/page/speaking/>Speaking</a></li><li class=site-nav-item><a title=About href=/page/about/>About</a></li></ul></div></header><div id=container><div class=container><article class=post-container itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class=post-title itemprop="name headline">Getting Started with React & ES6</h1><p class="post-date post-line"><span>Published <time datetime=2015-09-07 itemprop=datePublished>Mon, Sep 7, 2015</time></span>
<span>by</span>
<span itemscope itemprop=author itemtype=https://schema.org/Person><span itemprop=name><a href=https://github.com/dwmkerr itemprop=url rel=author>Dave Kerr</a></span></span></p></header><div class="post-content clearfix" itemprop=articleBody><p>Feeling like having a go with Facebook's hugely popular <a href=http://facebook.github.io/react/>React</a> framework but not sure where to start?</p><p>In this post I'm going to build a simple React application from scratch - using <a href=http://es6-features.org/>ECMAScript 6</a>.</p><p>We'll put together the bare minimum skeleton of a site and keep the folder structure free of noise and clutter so that you can focus on the app code and not the tooling!</p><p>The simple app we'll build is at <a href=https://github.com/dwmkerr/react-es6-starter>github.com/dwmkerr/react-es6-starter</a>, or see <a href=https://react-es6-starter.herokuapp.com>it live</a>.</p><h2 id=building-the-code>Building the Code</h2><p>Our goal will be to have a single <code>index.html</code> file which includes our Javascript files. We're aiming for something like this:</p><p><img src=images/Build-Process.png alt="Build Process 1"></p><p>But browsers don't handle ES6 yet. So our loose files, which reference each other, are going to have to be transpiled into ES5 and bundled into a single file. We need a build process:</p><p><img src=images/Build-Process-2.png alt="Build Process 2"></p><p><a href=webpack.github.io>Webpack</a> can handle all of this for us. Given an entrypoint file, webpack will traverse all of the <code>require</code> and <code>import</code> statements and build a single bundle file. It also allows us to configure &lsquo;loaders&rsquo;, which let us pass these files through other tools:</p><p><img src=images/Build-Process-3.png alt="Build Process 3"></p><p>We'll need the following libraries:</p><ol><li><a href=webpack.github.io>Webpack</a> - the tool that handles the build process.</li><li><a href=babeljs.io>Babel</a> - an excellent ES6/ES7/JSX to ES5 transpiler.</li><li><a href=github.com/babel/babel-loader>Babel Loader</a> - the component which integrates Babel into our Webpack build.</li><li><a href=github.com/ampedandwired/html-webpack-plugin>Html Webpack Plugin</a> - a simple Webpack plugin which will copy our index file to our build folder and add a link to our Webpack bundle.</li></ol><p>Let's install these modules:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>npm install --save webpack babel babel-loader html-webpack-plugin
</code></pre></div><p>We'll also need a webpack config file. By default webpack expects a file named <code>webpack.config.js</code> to be in the root of the project. But every tool under the sun wants to stick its config file in the root of our project, and most of the time they're just in the way.</p><p>So let's put everything to do with our tooling in a <code>tooling</code> folder instead. Create the file <code>webpack.config.js</code> in a <code>tooling</code> folder in the root of the project:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;path&#39;</span>);

<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> {

  <span style=color:#75715e>//  Defines the entrypoint of our application.
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>entry</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#39;../src/app.js&#39;</span>),

  <span style=color:#75715e>//  Bundle to a ./build/public/bundle.js file.
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>output</span><span style=color:#f92672>:</span> {
    <span style=color:#a6e22e>path</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#39;../build/public&#39;</span>),
    <span style=color:#a6e22e>filename</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;bundle.js&#39;</span>
  },

  <span style=color:#75715e>//  Use babel for anything that is *.js or *.jsx.
</span><span style=color:#75715e></span>  <span style=color:#a6e22e>module</span><span style=color:#f92672>:</span> {
    <span style=color:#a6e22e>loaders</span><span style=color:#f92672>:</span> [
      {
        <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/\.jsx?$/</span>,      
        <span style=color:#a6e22e>loader</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;babel-loader&#39;</span>,
        <span style=color:#a6e22e>include</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#39;../src&#39;</span>)
      }
    ]
  }
};
</code></pre></div><p>First we define our entry point - the first file which will actually be run if we run the final bundled script. This is the <code>app.js</code> file we'll create shortly. If <code>app.js</code> includes other modules, Webpack will pick them up, if those modules include other modules, they will be picked up and so on.</p><p>Next we specify that everything should be bundled into a <code>./build/public/bundle.js</code> file (we're going to use the convention that everything we can produce with our tools goes into <code>./build</code>).</p><p>Finally, we specify that every file in <code>src</code> which matches the <code>\.jsx?$</code> regex will go through the babel loader.</p><h3 id=using-es6>Using ES6!</h3><p>We've actually got enough now to use ES6. Create a file in <code>src</code> called <code>index.html</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#75715e>&lt;!DOCTYPE html&gt;</span>
&lt;<span style=color:#f92672>html</span>&gt;
&lt;<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>body</span>&gt;
&lt;/<span style=color:#f92672>html</span>&gt;
</code></pre></div><p>Then create a <code>src/app.js</code> file:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>PI</span> <span style=color:#f92672>=</span> <span style=color:#ae81ff>3.14</span>;
<span style=color:#66d9ef>let</span> <span style=color:#a6e22e>vals</span> <span style=color:#f92672>=</span> [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>, <span style=color:#ae81ff>3</span>].<span style=color:#a6e22e>map</span>(<span style=color:#a6e22e>x</span> =&gt; <span style=color:#a6e22e>x</span><span style=color:#f92672>*</span><span style=color:#ae81ff>2</span>);
document.<span style=color:#a6e22e>body</span>.<span style=color:#a6e22e>innerText</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;Pi is &#34;</span> <span style=color:#f92672>+</span> <span style=color:#ae81ff>3.14</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; and vals is &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>vals</span>;
</code></pre></div><p>Run the command <code>./node_modules/.bin/webpack --config ./tooling/webpack.config.js</code> and our code is built, transpiled an moved to the build folder.</p><p>Now we could serve this folder using any basic webserver. We are already using webpack, so the webpack dev server will do the trick. It uses exactly the same config file as the webpack tool:</p><pre><code>npm install --save-dev webpack-dev-server
./node_modules/.bin/webpack-dev-server --config ./tooling/webpack.config --inline
</code></pre><p>The inline reloads the page when the source changes. We don't need to tell the server where the files are, it knows that from the webpack config.</p><p>Let's stick these commands in our <code>package.json</code> for convenience:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>{ 
  ...
<span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#f92672>:</span> {
    <span style=color:#e6db74>&#34;start&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;webpack-dev-server --config ./tooling/webpack.config.js --inline --quiet&#34;</span>,
    <span style=color:#e6db74>&#34;webpack&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;webpack --config tooling/webpack.config.js&#34;</span>
  ...
}
</code></pre></div><p>Now we can manually build with <code>npm run webpack</code> and start our dev server with <code>npm start</code>.</p><h3 id=adding-some-react>Adding some React</h3><p>Let's add a React component. Create a folder under <code>app</code> called <code>home</code> and add a <code>home.js</code> file:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;

<span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Home</span> <span style=color:#66d9ef>extends</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>Component</span> {
  <span style=color:#a6e22e>render</span> () {
    <span style=color:#66d9ef>return</span> <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>div</span><span style=color:#f92672>&gt;</span>
        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>h1</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>React</span> <span style=color:#a6e22e>ES6</span> <span style=color:#a6e22e>Starter</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#960050;background-color:#1e0010>h</span><span style=color:#960050;background-color:#1e0010>1</span><span style=color:#960050;background-color:#1e0010>&gt;</span>
        <span style=color:#f92672>&lt;</span><span style=color:#a6e22e>p</span><span style=color:#f92672>&gt;</span><span style=color:#a6e22e>Welcome</span> <span style=color:#a6e22e>to</span> <span style=color:#a6e22e>the</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>ES6</span> <span style=color:#a6e22e>Starter</span> <span style=color:#a6e22e>home</span> <span style=color:#a6e22e>page</span><span style=color:#f92672>!</span><span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#960050;background-color:#1e0010>p</span><span style=color:#960050;background-color:#1e0010>&gt;</span>
      <span style=color:#f92672>&lt;</span><span style=color:#960050;background-color:#1e0010>/</span><span style=color:#960050;background-color:#1e0010>d</span><span style=color:#960050;background-color:#1e0010>i</span><span style=color:#960050;background-color:#1e0010>v</span><span style=color:#960050;background-color:#1e0010>&gt;</span><span style=color:#960050;background-color:#1e0010>;</span>
  }
}
</code></pre></div><p>This is our first react component, which does nothing more than render some basic markup. We'll use this as the starting point for our application.</p><p>We can now take our <code>app.js</code> file and render our Home component into the div. Here's <code>app.js</code>:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react/addons&#39;</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Home</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./home/home&#39;</span>;

<span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>render</span>(<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Home</span> <span style=color:#f92672>/</span><span style=color:#f92672>&gt;</span>, document.<span style=color:#a6e22e>body</span>);
</code></pre></div><p>That's all there is to it! We've got a clean and simple starting point to begin playing with React. Before we look into things like state management and routing, let's look into testing what we have so far.</p><h3 id=testing>Testing</h3><p>Even the most simple app would be incomplete without looking into how we will deal with the testing.</p><p>Many will recommend the <a href=https://facebook.github.io/jest/>Jest</a> framework to test React applications. However, it's a bit more to learn and has some problems with NodeJS v0.12, so until we get Node v4 I'm going to keep things simple.</p><p>First, we'll install <a href=http://karma-runner.github.io/>Karma</a> as a test runner. We'll use <a href=http://jasmine.github.io/>Jasmine</a> as as framework to write test cases and <a href=http://phantomjs.org/>PhantomJS</a> as a headless browser in which our tests will run. This means we'll need to add some more dev dependencies:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>npm install --save-dev karma jasmine karma-webpack karma-jasmine karma-phantomjs-launcher
</code></pre></div><p>We can now create a <code>karma.config.js</code> file in our <code>tooling</code> folder:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>path</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>require</span>(<span style=color:#e6db74>&#39;path&#39;</span>);

<span style=color:#a6e22e>module</span>.<span style=color:#a6e22e>exports</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>config</span>) {
  <span style=color:#a6e22e>config</span>.<span style=color:#a6e22e>set</span>({
    <span style=color:#a6e22e>browsers</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;PhantomJS&#39;</span>],
    <span style=color:#a6e22e>files</span><span style=color:#f92672>:</span> [
      <span style=color:#75715e>//  We need to polyfill as PhantomJS doesn&#39;t support &#39;bind&#39;.
</span><span style=color:#75715e></span>      <span style=color:#e6db74>&#39;../node_modules/babel-core/browser-polyfill.js&#39;</span>,
      <span style=color:#e6db74>&#39;../**/*.spec.js&#39;</span>
    ],
    <span style=color:#a6e22e>frameworks</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;jasmine&#39;</span>],
    <span style=color:#a6e22e>preprocessors</span><span style=color:#f92672>:</span> {
      <span style=color:#e6db74>&#39;../**/*.spec.js&#39;</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;webpack&#39;</span>],
    },
    <span style=color:#a6e22e>reporters</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;progress&#39;</span>],
    <span style=color:#a6e22e>singleRun</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>,
    <span style=color:#a6e22e>webpack</span><span style=color:#f92672>:</span> {
      <span style=color:#a6e22e>module</span><span style=color:#f92672>:</span> {
        <span style=color:#a6e22e>loaders</span><span style=color:#f92672>:</span> [
          {
            <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/\.jsx?$/</span>,      
            <span style=color:#a6e22e>loader</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;babel-loader&#39;</span>,
            <span style=color:#a6e22e>include</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>path</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>__dirname</span>, <span style=color:#e6db74>&#39;../src&#39;</span>)
          }
        ],
      }
    },
    <span style=color:#a6e22e>webpackServer</span><span style=color:#f92672>:</span> {
      <span style=color:#a6e22e>noInfo</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>true</span>
    }
  });
};
</code></pre></div><p>So here we are:</p><ol><li>Loading a polyfill from babel core (sorry guys, one more <code>npm install --save-dev babel-core</code>) which gives PhantomJS the <code>bind</code> function (along with some others). This is needed as some of the testing code in the browser needs these features.</li><li>Specifying that anything that ends in <code>.spec.js</code> should be loaded.</li><li>Running anything that ends in <code>.spec.js</code> through webpack.</li><li>Telling webpack to use babel.</li></ol><p>Quite a bit of config, but we're re-using the same webpack tooling as before. We run the code through webpack, which sends it through babel and builds ES5 we can test in the browser.</p><p>With this in place, we can write a spec. Add <code>home.spec.js</code> to the <code>home</code> folder:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>React</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;react&#39;</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>$</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;jquery&#39;</span>;
<span style=color:#66d9ef>import</span> <span style=color:#a6e22e>Home</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#39;./home.js&#39;</span>;
 
<span style=color:#a6e22e>describe</span>(<span style=color:#e6db74>&#39;Home&#39;</span>, () =&gt; {

  <span style=color:#a6e22e>it</span>(<span style=color:#e6db74>&#39;should render to the DOM&#39;</span>, <span style=color:#66d9ef>function</span>() {

    <span style=color:#75715e>//  Create the &lt;Home /&gt; react component.
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>component</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>render</span>(<span style=color:#f92672>&lt;</span><span style=color:#a6e22e>Home</span> <span style=color:#f92672>/</span><span style=color:#f92672>&gt;</span>, document.<span style=color:#a6e22e>body</span>);

    <span style=color:#75715e>//  Find the DOM element for the created component.
</span><span style=color:#75715e></span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>node</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>React</span>.<span style=color:#a6e22e>findDOMNode</span>(<span style=color:#a6e22e>component</span>);

    <span style=color:#75715e>//  Check the DOM looks how we&#39;d expect it to.
</span><span style=color:#75715e></span>    <span style=color:#a6e22e>expect</span>(<span style=color:#a6e22e>$</span>(<span style=color:#a6e22e>node</span>).<span style=color:#a6e22e>children</span>(<span style=color:#e6db74>&#39;h1&#39;</span>).<span style=color:#a6e22e>text</span>()).<span style=color:#a6e22e>toEqual</span>(<span style=color:#e6db74>&#34;React Redux Starter&#34;</span>);
    
  });

});
</code></pre></div><p>What's going on here? We just ask React to render our Home component directly into the DOM. We get a component back from this call. We can then ask React to give us the DOM associatefd with the component and use familiar tools (jQuery!) to test the shape of the generated DOM.</p><p>All that's missing is the last of the dev dependencies we've missed:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>npm install --save-dev jquery phantomjs
</code></pre></div><p>We can run tests directly on a Mac or Unix with:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./node_modules/.bin/karma start ./tooling/karma.config.js
</code></pre></div><p>For Windows use:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>node_modules<span style=color:#ae81ff>\.</span>bin<span style=color:#ae81ff>\k</span>arma start tooling<span style=color:#ae81ff>\k</span>arma.config.js
</code></pre></div><p>In fact, we'll update our <code>package.json</code> scripts so that this is the <code>test</code> command:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#e6db74>&#34;scripts&#34;</span><span style=color:#f92672>:</span> {
  <span style=color:#e6db74>&#34;test&#34;</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;./node_modules/.bin/karma start ./tooling/karma.config.js&#34;</span>,
  ...
</code></pre></div><p>Done! This means we can run tests on any platform with NodeJS<sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> using the same command - <code>npm test</code>.</p><p>We now have a very simple setup which allows us to run tests. You can build on this - perhaps adding Jest later or a more sophisticated or React specific set of tools.</p><h3 id=adding-code-coverage>Adding Code Coverage</h3><p>You might want to add some code coverage information to your project. This can be a little tricky when using ES6, as we need to make sure we report coverage of the original ES6 code, rather than the actual transpiled code which is instrumented.</p><p>Fortunately, with the clean and simple setup we have built, adding code coverage is a snap.</p><p>Our test runner, Karma, is built to quickly integrate with the code coverage tool <a href=https://github.com/gotwarlost/istanbul>Istanbul</a>, we just need to use the <a href=https://github.com/karma-runner/karma-coverage>Karma Coverage</a> plugin. Let's install the two modules:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>npm install --save-dev istanbul karma-coverage
</code></pre></div><p>Now with a small addition to our <code>karma.config.js</code> file we will get a nice HTML coverage report. We need to update our <code>reporters</code> config to include <code>coverage</code> and specify coverage options in the <code>coverageReporter</code> config.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>  <span style=color:#a6e22e>reporters</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>&#39;progress&#39;</span>, <span style=color:#e6db74>&#39;coverage&#39;</span>],
  <span style=color:#a6e22e>coverageReporter</span><span style=color:#f92672>:</span> {
    <span style=color:#a6e22e>dir</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;../build/coverage/&#39;</span>,
    <span style=color:#a6e22e>type</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;html&#39;</span>
  }
</code></pre></div><p>If you run <code>npm test</code> now, you'll get an HTML coverage report generated. The only problem is that it is for the transpiled code, which makes it almost useless. A customer instrumenter called isparta will help us here. We use isparta to get a report of the coverage of the original ES6 code. Two more modules:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>npm install --save-dev isparta isparta-instrumenter-loader
</code></pre></div><p>Then in our karma config we pass the orignal code through the insrtrumenter, before babel transpiles it:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=color:#a6e22e>webpack</span><span style=color:#f92672>:</span> {
  <span style=color:#a6e22e>module</span><span style=color:#f92672>:</span> {
  <span style=color:#a6e22e>preLoaders</span><span style=color:#f92672>:</span> [
    {
      <span style=color:#a6e22e>test</span><span style=color:#f92672>:</span> <span style=color:#e6db74>/\.jsx?$/</span>,
      <span style=color:#a6e22e>exclude</span><span style=color:#f92672>:</span> [<span style=color:#e6db74>/node_modules/</span>, <span style=color:#e6db74>/\.spec\.js/</span>],
      <span style=color:#a6e22e>loader</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;isparta-instrumenter-loader&#39;</span>
    },
  ],
  <span style=color:#75715e>// everything else stays the same...
</span></code></pre></div><p>Anything that is not a spec or from <code>node_modules</code> gets instrumented. Now we have a ES6 code coverage report:</p><p><img src=images/CapturFiles_8.png alt="Code Coverage Report"></p><p>With this in place, you can go even further and integrate with other CI or publish to code quality systems (for example this repo integrates to <a href=https://coveralls.io>coveralls.io</a>). This is often used to show badges for repos:</p><p><a href="https://coveralls.io/github/dwmkerr/react-es6-starter?branch=master"><img src=images/badge.svg alt="Coverage Status"></a></p><p>Another use case is to gate checkins unless they maintain a certain code coverage threshhold.</p><h3 id=wrapping-up>Wrapping Up</h3><p>This provides a very lean starting point for learning React. There's no moving parts at the moment - no state management. We'll get into that in later articles but right now you have a playground.</p><p>You can set up CI in a flash, just sign up for a <a href=https://travis-ci.org/>Travis</a> account and use a <code>travis.yml</code> like this:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yml data-lang=yml>language: node_js
node_js:
  - <span style=color:#e6db74>&#34;0.12&#34;</span>
</code></pre></div><p>This repo is all ready to push to <a href=todo>Heroku</a>, no Procfile is needed. Check out <a href=todo>react-es6-starter.herokuapp.com</a> to see the code in action.</p><p>I hope you've found this article useful! Next time we'll be getting into the details of managing state in React.</p><p>Please fork the repo and have a play, let me know of any suggestions or improvements!</p><p><a href=https://github.com/dwmkerr/react-es6-starter>github.com/dwmkerr/react-es6-starter</a></p><h3 id=glossary-of-conventions>Glossary of Conventions</h3><p>There are a few conventions that I personally use in most Javascript projects. The conventions used in this article which I think are valuable to consider using in many projects are:</p><h4 id=always-support-installteststart>Always support install/test/start</h4><p>Everyone should always be able to checkout, install, test and run the code with the following commands:</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>npm install <span style=color:#75715e># installs everything needed</span>
npm test    <span style=color:#75715e># lets the user know the code works right on their system!</span>
npm start   <span style=color:#75715e># starts the code, lets the user know what to do next</span>
</code></pre></div><p>Install should setup everything, and if code needs to be built to be testable, this should be a post-install hook.</p><p>Test should be run next, as a user should be able to verify that the code works as expected on their system.</p><p>Finally, when the user runs start, a dev server (as convention dictates we are in a dev mode by default (and production mode is set with a flag or environment variable) the server should start and a console message should show the user where to browse to.</p><hr><h5 id=footnotes>Footnotes</h5><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p><a href=https://www-03.ibm.com/press/us/en/pressrelease/47474.wss>IBM Mainframes</a> anyone? <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section></div><footer class="post-footer clearfix"><p class=post-tags><span>Tagged:</span>
<a href=/tags/CodeProject/>CodeProject</a>,
<a href=/tags/Javascript/>Javascript</a>,
<a href=/tags/ECMAScript-6/>ECMAScript 6</a>,
<a href=/tags/React/>React</a></p><div class=share><a class=icon-twitter href="https://twitter.com/share?text=Getting%20Started%20with%20React%20%26%20ES6&url=http%3a%2f%2fdwmkerr.com%2fgetting-started-with-react%2f" onclick="window.open(this.href,'twitter-share','width=550,height=235');return false;"><i class="fa fa-twitter"></i><span class=hidden>Twitter</span></a>
<a class=icon-facebook href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fdwmkerr.com%2fgetting-started-with-react%2f" onclick="window.open(this.href,'facebook-share','width=580,height=296');return false;"><i class="fa fa-facebook"></i><span class=hidden>Facebook</span></a></div></footer><div class=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"dmwkerr"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div></div></div><footer class=footer><div class=container><div class=site-title-wrapper><h1 class=site-title><a title=dwmkerr.com href=http://dwmkerr.com/>dwmkerr.com</a></h1><a class="button-square button-jump-top js-jump-top" href=#><i class="fa fa-angle-up"></i></a></div><p class=footer-copyright><span>&copy; 2019 / Powered by <a href=https://gohugo.io/>Hugo</a></span></p><p class=footer-copyright><span><a href=https://github.com/roryg/ghostwriter>Ghostwriter theme</a> By <a href=http://jollygoodthemes.com>JollyGoodThemes</a></span>
<span>/ <a href=https://github.com/jbub/ghostwriter>Ported</a> to Hugo By <a href=https://github.com/jbub>jbub</a></span></p></div></footer><script src=http://dwmkerr.com/js/jquery-1.11.3.min.js></script><script src=http://dwmkerr.com/js/jquery.fitvids.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=http://dwmkerr.com/js/scripts.js></script></body></html>