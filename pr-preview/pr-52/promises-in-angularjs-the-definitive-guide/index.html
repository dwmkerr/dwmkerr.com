<!doctype html><html lang=en-uk prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><title>AngularJS Promises - The Definitive Guide</title><meta property="og:title" content="AngularJS Promises - The Definitive Guide"><meta name=twitter:title content="AngularJS Promises - The Definitive Guide"><meta name=description content="Articles on the craft of software development."><meta property="og:description" content="Articles on the craft of software development."><meta name=twitter:description content="Articles on the craft of software development."><meta name=author content="Dave Kerr"><meta property="og:site_name" content="dwmkerr.com"><meta property="og:url" content="https://dwmkerr.github.io/dwmkerr.com/pr-preview/pr-52/promises-in-angularjs-the-definitive-guide/"><meta name=twitter:card content="summary"><meta property="og:type" content="article"><meta name=generator content="Hugo 0.154.5"><script async src="https://www.googletagmanager.com/gtag/js?id=G-XNRSGLYJRM"></script><script>var doNotTrack=!1,dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes";if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XNRSGLYJRM")}</script><link rel=stylesheet href=https://dwmkerr.github.io/dwmkerr.com/pr-preview/pr-52/css/style.css><link rel=stylesheet href=https://dwmkerr.github.io/css/custom.css><link rel=icon type=image/x-icon href=https://dwmkerr.github.io/images/favicon.ico></head><body><a href=#main class="skip-link p-screen-reader-text"></a><svg style="display:none" aria-hidden="true"><symbol id="icon-500px" viewBox="0 0 16 16"><g><path d="M3.953 10.512a5.24 5.24.0 006.996 3.141c.625-.262 1.184-.641 1.666-1.122s.859-1.041 1.122-1.666c.272-.647.412-1.331.412-2.037s-.137-1.394-.412-2.037c-.262-.625-.641-1.184-1.122-1.666s-1.041-.859-1.666-1.122A5.226 5.226.0 008.912 3.59c-.716.0-1.431.144-2.066.413-.509.216-1.372.769-1.875 1.291l-.003.003V.984h7.241c.262-.003.262-.372.262-.491.0-.122.0-.487-.266-.491H4.377a.343.343.0 00-.344.341v6.066c0 .197.244.338.472.384.444.094.544-.047.653-.197l.016-.019c.166-.247.681-.766.688-.772a4.262 4.262.0 013.037-1.25c1.147.0 2.222.444 3.028 1.25a4.245 4.245.0 011.256 3.019 4.236 4.236.0 01-1.25 3.019 4.336 4.336.0 01-3.047 1.25 4.136 4.136.0 01-2.159-.597l.003-3.688c0-.491.213-1.028.572-1.431a2.09 2.09.0 011.588-.716c.594.0 1.15.225 1.566.634.409.406.637.95.637 1.528A2.179 2.179.0 018.887 11.02c-.238.0-.672-.106-.691-.109-.25-.075-.356.272-.391.387-.134.441.069.528.109.541.397.125.659.147 1.003.147a3.173 3.173.0 003.169-3.169c0-1.734-1.422-3.144-3.166-3.144-.856.0-1.659.328-2.263.919-.575.566-.903 1.319-.903 2.069v.019c-.003.094-.003 2.306-.006 3.031l-.003-.003c-.328-.363-.653-.919-.869-1.488-.084-.222-.275-.184-.534-.103-.125.034-.469.141-.391.394zm3.722-.865c0 .106.097.2.156.253l.019.019c.1.097.194.147.281.147a.181.181.0 00.131-.05c.044-.041.537-.544.588-.591l.553.55c.05.056.106.088.172.088.088.0.184-.053.284-.156.238-.244.119-.375.063-.438l-.559-.559.584-.588c.128-.137.016-.284-.097-.397-.162-.162-.322-.206-.422-.112l-.581.581-.588-.588a.16.16.0 00-.113-.047c-.078.0-.172.053-.275.156-.181.181-.219.306-.125.406l.588.584-.584.584c-.053.05-.078.103-.075.156zm1.278-7.931c-.938.0-1.938.191-2.669.506a.207.207.0 00-.134.181.753.753.0 00.069.337c.047.116.166.425.4.334a6.689 6.689.0 012.334-.444 6.35 6.35.0 012.469.497c.622.263 1.206.644 1.844 1.194a.22.22.0 00.147.059c.125.0.244-.122.347-.237.169-.191.287-.35.119-.509a6.858 6.858.0 00-2.1-1.356 7.326 7.326.0 00-2.825-.563zM14.006 13.3c-.113-.113-.209-.178-.294-.203s-.162-.006-.222.053l-.056.056a6.32 6.32.0 01-6.938 1.356 6.336 6.336.0 01-2.013-1.356 6.046 6.046.0 01-1.356-2.012c-.288-.713-.381-1.247-.413-1.422-.003-.016-.006-.028-.006-.037-.041-.206-.231-.222-.503-.178-.112.019-.459.072-.428.319v.006a7.261 7.261.0 002.04 3.994 7.266 7.266.0 0010.288.0l.059-.059c.069-.084.134-.225-.159-.516z"/></g></symbol><symbol id="icon-codepen" viewBox="0 0 16 16"><g><path d="M14.777 5.751l-7-4.667a.5.5.0 00-.555.0l-7 4.667a.501.501.0 00-.223.416v4.667c0 .167.084.323.223.416l7 4.667a.5.5.0 00.554.0l7-4.667a.501.501.0 00.223-.416V6.167a.501.501.0 00-.223-.416zM7.5 10.232 4.901 8.5 7.5 6.768 10.099 8.5 7.5 10.232zM8 5.899V2.434l5.599 3.732L11 7.898l-3-2zm-1 0-3 2-2.599-1.732L7 2.435V5.9zM3.099 8.5 1 9.899V7.101L3.099 8.5zM4 9.101l3 2v3.465l-5.599-3.732L4 9.102zm4 2 3-2 2.599 1.732L8 14.565V11.1zM11.901 8.5 14 7.101v2.798L11.901 8.5z"/></g></symbol><symbol id="icon-dribbble" viewBox="0 0 16 16"><g><path d="M8 16c-4.412.0-8-3.588-8-8s3.587-8 8-8c4.412.0 8 3.587 8 8s-3.588 8-8 8zm6.747-6.906c-.234-.075-2.116-.634-4.256-.291a29.7 29.7.0 011.328 4.872 6.845 6.845.0 002.928-4.581zM10.669 14.3c-.103-.6-.497-2.688-1.456-5.181-.016.006-.031.009-.044.016-3.856 1.344-5.241 4.016-5.362 4.266a6.807 6.807.0 006.863.9zm-7.747-1.722c.156-.266 2.031-3.369 5.553-4.509a7.04 7.04.0 01.269-.081 24.04 24.04.0 00-.553-1.159c-3.409 1.022-6.722.978-7.022.975-.003.069-.003.138-.003.209.0 1.753.666 3.356 1.756 4.566zM1.313 6.609c.306.003 3.122.016 6.319-.831A43.092 43.092.0 005.098 1.825 6.854 6.854.0 001.314 6.609zM6.4 1.366a36.612 36.612.0 012.55 4c2.431-.909 3.459-2.294 3.581-2.469A6.799 6.799.0 006.4 1.366zm6.891 2.325c-.144.194-1.291 1.663-3.816 2.694.159.325.313.656.453.991.05.119.1.234.147.353 2.275-.284 4.534.172 4.759.219A6.816 6.816.0 0013.29 3.692z"/></g></symbol><symbol id="icon-facebook" viewBox="0 0 16 16"><g><path d="M9.5 3H12V0H9.5C7.57.0 6 1.57 6 3.5V5H4v3h2v8h3V8h2.5l.5-3H9V3.5c0-.271.229-.5.5-.5z"/></g></symbol><symbol id="icon-feed" viewBox="0 0 16 16"><g><path d="M2.13 11.733c-1.175.0-2.13.958-2.13 2.126.0 1.174.955 2.122 2.13 2.122a2.126 2.126.0 002.133-2.122A2.133 2.133.0 002.13 11.733zM.002 5.436v3.067c1.997.0 3.874.781 5.288 2.196a7.45 7.45.0 012.192 5.302h3.08c0-5.825-4.739-10.564-10.56-10.564zM.006.0v3.068C7.128 3.068 12.924 8.87 12.924 16H16C16 7.18 8.824.0.006.0z"/></g></symbol><symbol id="icon-flickr" viewBox="0 0 16 16"><g><path d="M0 8.5a3.5 3.5.0 117 0 3.5 3.5.0 01-7 0zm9 0a3.5 3.5.0 117 0 3.5 3.5.0 01-7 0z"/></g></symbol><symbol id="icon-github" viewBox="0 0 16 16"><g><path d="M8 .198A8 8 0 005.471 15.789c.4.074.547-.174.547-.385.0-.191-.008-.821-.011-1.489-2.226.484-2.695-.944-2.695-.944-.364-.925-.888-1.171-.888-1.171-.726-.497.055-.486.055-.486.803.056 1.226.824 1.226.824.714 1.223 1.872.869 2.328.665.072-.517.279-.87.508-1.07-1.777-.202-3.645-.888-3.645-3.954.0-.873.313-1.587.824-2.147-.083-.202-.357-1.015.077-2.117.0.0.672-.215 2.201.82A7.672 7.672.0 018 4.066c.68.003 1.365.092 2.004.269 1.527-1.035 2.198-.82 2.198-.82.435 1.102.162 1.916.079 2.117.513.56.823 1.274.823 2.147.0 3.073-1.872 3.749-3.653 3.947.287.248.543.735.543 1.481.0 1.07-.009 1.932-.009 2.195.0.213.144.462.55.384A8 8 0 008.001.196z"/></g></symbol><symbol id="icon-gitlab" viewBox="0 0 28 28"><g><path d="M1.625 11.031 14 26.89.437 17.046a1.092 1.092.0 01-.391-1.203l1.578-4.813zm7.219.0h10.313L14.001 26.89zM5.75 1.469l3.094 9.562H1.625l3.094-9.562a.548.548.0 011.031.0zm20.625 9.562 1.578 4.813a1.09 1.09.0 01-.391 1.203l-13.563 9.844 12.375-15.859zm0 0h-7.219l3.094-9.562a.548.548.0 011.031.0z"/></g></symbol><symbol id="icon-google-plus" viewBox="0 0 16 16"><g><path d="M5.091 7.147v1.747h2.888c-.116.75-.872 2.197-2.888 2.197-1.737.0-3.156-1.441-3.156-3.216s1.419-3.216 3.156-3.216c.991.0 1.65.422 2.028.784L8.5 4.112c-.888-.828-2.037-1.331-3.409-1.331C2.275 2.784.0 5.059.0 7.875s2.275 5.091 5.091 5.091c2.937.0 4.888-2.066 4.888-4.975.0-.334-.037-.591-.081-.844H5.092zM16 7h-1.5V5.5H13V7h-1.5v1.5H13V10h1.5V8.5H16z"/></g></symbol><symbol id="icon-instagram" viewBox="0 0 22 22"><g><path d="M15.445.0H6.554A6.559 6.559.0 000 6.554v8.891A6.559 6.559.0 006.554 22h8.891a6.56 6.56.0 006.554-6.555V6.554A6.557 6.557.0 0015.445.0zm4.342 15.445a4.343 4.343.0 01-4.342 4.342H6.554a4.341 4.341.0 01-4.341-4.342V6.554a4.34 4.34.0 014.341-4.341h8.891a4.342 4.342.0 014.341 4.341l.001 8.891z"/><path d="M11 5.312A5.693 5.693.0 005.312 11 5.694 5.694.0 0011 16.688 5.694 5.694.0 0016.688 11 5.693 5.693.0 0011 5.312zm0 9.163a3.475 3.475.0 11-.001-6.95 3.475 3.475.0 01.001 6.95zm5.7-10.484a1.363 1.363.0 11-1.364 1.364c0-.752.51-1.364 1.364-1.364z"/></g></symbol><symbol id="icon-linkedin" viewBox="0 0 16 16"><g><path d="M6 6h2.767v1.418h.04C9.192 6.727 10.134 6 11.539 6 14.46 6 15 7.818 15 10.183V15h-2.885v-4.27c0-1.018-.021-2.329-1.5-2.329-1.502.0-1.732 1.109-1.732 2.255V15H6V6zM1 6h3v9H1V6zM4 3.5A1.5 1.5.0 11.999 3.499 1.5 1.5.0 014 3.5z"/></g></symbol><symbol id="icon-mail" viewBox="0 0 22 18"><g><path fill="#000" d="M0 17.225V.776h22v16.447H0v.002zm3.011-1.815h15.978l-5.111-5.115L11 13.179l-2.877-2.883-5.112 5.114zm-1.216-1.275 5.077-5.09L1.795 3.98v10.155zm13.332-5.09 5.079 5.09V3.979l-5.079 5.066zm-4.126 1.588 8.022-8.027-16.045-.001 8.023 8.028z"/></g></symbol><symbol id="icon-medium" viewBox="0 0 24 24"><g><path d="M22.085 4.733 24 2.901V2.5h-6.634l-4.728 11.768L7.259 2.5H.303v.401L2.54 5.594c.218.199.332.49.303.783V16.96c.069.381-.055.773-.323 1.05L0 21.064v.396h7.145v-.401l-2.52-3.049a1.244 1.244.0 01-.347-1.05V7.806l6.272 13.659h.729l5.393-13.659v10.881c0 .287.0.346-.188.534l-1.94 1.877v.402h9.412v-.401l-1.87-1.831a.556.556.0 01-.214-.534V5.267a.554.554.0 01.213-.534z"/></g></symbol><symbol id="icon-npm" viewBox="0 0 16 16"><g><path d="M0 0v16h16V0H0zm13 13h-2V5H8v8H3V3h10v10z"/></g></symbol><symbol id="icon-pinterest" viewBox="0 0 16 16"><g><path d="M8 1.069A6.93 6.93.0 005.475 14.453c-.059-.547-.116-1.391.025-1.988.125-.541.813-3.444.813-3.444s-.206-.416-.206-1.028c0-.963.559-1.684 1.253-1.684.591.0.878.444.878.975.0.594-.378 1.484-.575 2.306-.166.691.344 1.253 1.025 1.253 1.231.0 2.178-1.3 2.178-3.175.0-1.659-1.194-2.819-2.894-2.819-1.972.0-3.128 1.478-3.128 3.009.0.597.228 1.234.516 1.581.056.069.066.128.047.2a95.89 95.89.0 01-.194.787c-.031.128-.1.153-.231.094-.866-.403-1.406-1.669-1.406-2.684.0-2.188 1.587-4.194 4.578-4.194 2.403.0 4.272 1.712 4.272 4.003.0 2.388-1.506 4.313-3.597 4.313-.703.0-1.362-.366-1.588-.797.0.0-.347 1.322-.431 1.647-.156.603-.578 1.356-.862 1.816a6.93 6.93.0 008.984-6.622A6.931 6.931.0 008.001 1.068z"/></g></symbol><symbol id="icon-search" viewBox="0 0 16 16"><g><path d="M15.504 13.616l-3.79-3.223c-.392-.353-.811-.514-1.149-.499a6 6 0 10-.672.672c-.016.338.146.757.499 1.149l3.223 3.79c.552.613 1.453.665 2.003.115s.498-1.452-.115-2.003zM6 10a4 4 0 110-8 4 4 0 010 8z"/></g></symbol><symbol id="icon-strava" viewBox="0 0 24 24"><g><path d="M15.387 17.944l-2.089-4.116h-3.065L15.387 24l5.15-10.172h-3.066m-7.008-5.599 2.836 5.598h4.172L10.463.0l-7 13.828h4.169"/></g></symbol><symbol id="icon-tumblr" viewBox="0 0 16 16"><g><path d="M9.001 7v3.659c0 .928-.012 1.463.086 1.727.098.262.342.534.609.691.354.212.758.318 1.214.318.81.0 1.289-.107 2.09-.633v2.405a9.089 9.089.0 01-1.833.639A7.93 7.93.0 019.369 16a4.9 4.9.0 01-1.725-.276 4.195 4.195.0 01-1.438-.79c-.398-.343-.672-.706-.826-1.091s-.23-.944-.23-1.676V6.556H3.003V4.29c.628-.204 1.331-.497 1.778-.877a4.386 4.386.0 001.08-1.374C6.133 1.505 6.32.825 6.422.0h2.579v4H13v3H9.001z"/></g></symbol><symbol id="icon-twitter" viewBox="0 0 16 16"><g><path d="M16 3.538a6.461 6.461.0 01-1.884.516 3.301 3.301.0 001.444-1.816 6.607 6.607.0 01-2.084.797 3.28 3.28.0 00-2.397-1.034A3.28 3.28.0 007.882 6.029 9.321 9.321.0 011.116 2.598a3.284 3.284.0 001.015 4.381A3.301 3.301.0 01.643 6.57v.041A3.283 3.283.0 003.277 9.83a3.291 3.291.0 01-1.485.057 3.293 3.293.0 003.066 2.281 6.586 6.586.0 01-4.862 1.359 9.286 9.286.0 005.034 1.475c6.037.0 9.341-5.003 9.341-9.341.0-.144-.003-.284-.009-.425a6.59 6.59.0 001.637-1.697z"/></g></symbol><symbol id="icon-vimeo" viewBox="0 0 16 16"><g><path d="M15.994 4.281c-.072 1.556-1.159 3.691-3.263 6.397-2.175 2.825-4.016 4.241-5.522 4.241-.931.0-1.722-.859-2.366-2.581-.431-1.578-.859-3.156-1.291-4.734-.478-1.722-.991-2.581-1.541-2.581-.119.0-.538.253-1.256.753l-.753-.969c.791-.694 1.569-1.388 2.334-2.081 1.053-.909 1.844-1.387 2.372-1.438 1.244-.119 2.013.731 2.3 2.553.309 1.966.525 3.188.647 3.666.359 1.631.753 2.447 1.184 2.447.334.0.838-.528 1.509-1.588.669-1.056 1.028-1.862 1.078-2.416.097-.912-.262-1.372-1.078-1.372a2.98 2.98.0 00-1.184.263c.787-2.575 2.287-3.825 4.506-3.753 1.641.044 2.416 1.109 2.322 3.194z"/></g></symbol><symbol id="icon-wordpress" viewBox="0 0 16 16"><g><path d="M2 8c0 2.313 1.38 4.312 3.382 5.259L2.52 5.622A5.693 5.693.0 002 8zm10.05-.295c0-.722-.266-1.222-.495-1.612-.304-.482-.589-.889-.589-1.371.0-.537.418-1.037 1.008-1.037.027.0.052.003.078.005A6.064 6.064.0 008 2.156 6.036 6.036.0 002.987 4.79c.141.004.274.007.386.007.627.0 1.599-.074 1.599-.074.323-.018.361.444.038.482.0.0-.325.037-.687.055l2.185 6.33 1.313-3.835-.935-2.495a12.304 12.304.0 01-.629-.055c-.323-.019-.285-.5.038-.482.0.0.991.074 1.58.074.627.0 1.599-.074 1.599-.074.323-.018.362.444.038.482.0.0-.326.037-.687.055l2.168 6.282.599-1.947c.259-.809.457-1.389.457-1.889zm-3.945.806-1.8 5.095a6.148 6.148.0 003.687-.093.52.52.0 01-.043-.081L8.105 8.511zm5.16-3.315c.026.186.04.386.04.601.0.593-.114 1.259-.456 2.093l-1.833 5.16c1.784-1.013 2.983-2.895 2.983-5.051a5.697 5.697.0 00-.735-2.803zM8 0a8 8 0 100 16A8 8 0 008 0zm0 15A7 7 0 118 1a7 7 0 010 14z"/></g></symbol><symbol id="icon-youtube" viewBox="0 0 16 16"><g><path d="M15.841 4.8s-.156-1.103-.637-1.587c-.609-.637-1.291-.641-1.603-.678-2.237-.163-5.597-.163-5.597-.163h-.006s-3.359.0-5.597.163c-.313.038-.994.041-1.603.678C.317 3.697.164 4.8.164 4.8S.005 6.094.005 7.391v1.213c0 1.294.159 2.591.159 2.591s.156 1.103.634 1.588c.609.637 1.409.616 1.766.684 1.281.122 5.441.159 5.441.159s3.363-.006 5.6-.166c.313-.037.994-.041 1.603-.678.481-.484.637-1.588.637-1.588s.159-1.294.159-2.591V7.39c-.003-1.294-.162-2.591-.162-2.591zm-9.494 5.275V5.578l4.322 2.256-4.322 2.241z"/></g></symbol></svg><header class=l-header><div class=header-row><p class="c-title p-title p-title--small"><a href=https://dwmkerr.github.io/dwmkerr.com/pr-preview/pr-52/ class=p-title__link>dwmkerr.com</a></p><nav class=header-icons><ul class=c-links><li class=c-links__item><a href=https://github.com/dwmkerr target=_blank title=GitHub><svg viewBox="0 0 16 16" class="c-links__icon"><path d="M8 .198A8 8 0 005.471 15.789c.4.074.547-.174.547-.385.0-.191-.008-.821-.011-1.489-2.226.484-2.695-.944-2.695-.944-.364-.925-.888-1.171-.888-1.171-.726-.497.055-.486.055-.486.803.056 1.226.824 1.226.824.714 1.223 1.872.869 2.328.665.072-.517.279-.87.508-1.07-1.777-.202-3.645-.888-3.645-3.954.0-.873.313-1.587.824-2.147-.083-.202-.357-1.015.077-2.117.0.0.672-.215 2.201.82A7.672 7.672.0 018 4.066c.68.003 1.365.092 2.004.269 1.527-1.035 2.198-.82 2.198-.82.435 1.102.162 1.916.079 2.117.513.56.823 1.274.823 2.147.0 3.073-1.872 3.749-3.653 3.947.287.248.543.735.543 1.481.0 1.07-.009 1.932-.009 2.195.0.213.144.462.55.384A8 8 0 008.001.196z"/></svg></a></li><li class=c-links__item><a href=https://linkedin.com/in/dwmkerr target=_blank title=LinkedIn><svg viewBox="0 0 16 16" class="c-links__icon"><path d="M6 6h2.767v1.418h.04C9.192 6.727 10.134 6 11.539 6 14.46 6 15 7.818 15 10.183V15h-2.885v-4.27c0-1.018-.021-2.329-1.5-2.329-1.502.0-1.732 1.109-1.732 2.255V15H6V6zM1 6h3v9H1V6zM4 3.5A1.5 1.5.0 11.999 3.499 1.5 1.5.0 014 3.5z"/></svg></a></li><li class=c-links__item><a href=https://amzn.to/4ho0F91 target=_blank title="My Book on Amazon"><svg viewBox="0 0 512 512" class="c-links__icon c-links__icon--amazon"><path d="M283 187c-62 2-121 19-121 81 0 43 26 64 61 64 31 0 51-12 68-30 8 11 10 16 24 27 3 2 8 2 10-1l31-27c4-3 2-8 0-10-7-11-15-19-15-39v-64c0-27 2-52-18-70-17-16-38-20-62-21-53-1-88 28-93 62-1 6 4 9 7 9l37 5c6 1 9-4 10-8 6-22 29-28 43-23 20 6 18 29 18 45zm-36 105c-15 0-25-13-25-30 1-36 29-42 61-42v18c0 32-17 54-36 54zm168 106c13-11 26-38 25-57 0-7-1-8-8-10-13-4-46-5-62 10-3 3-2 5 1 5 11-2 45-6 50 2 4 7-8 35-12 47-2 5 2 6 6 3zM58 342c96 91 247 94 345 25 7-4 0-12-6-9A376 376 0 0162 337c-4-3-8 2-4 5z"/></svg></a></li></ul></nav></div></header><main id=main class=l-main><article class=p-article><header><h1>AngularJS Promises - The Definitive Guide</h1></header><section id=js-article class=p-article__body><p>Promises are a core feature of AngularJS - whether you understand them or not, if you use AngularJS you&rsquo;ve almost certainly been using them for a while.</p><p>In this post I&rsquo;m going to explain what promises are, how they work, where they&rsquo;re used and finally how to use them effectively.</p><p>Once we&rsquo;ve got the core understanding of promises, we&rsquo;ll look at some more advanced functionality - chaining and resolving promises when routing.</p><h4 id=contents>Contents</h4><ol><li><a href=#whatarepromises>What are Promises?</a></li><li><a href=#howdopromiseswork>How do Promises Work?</a></li><li><a href=#arealworldexample>A Real World Example</a></li><li><a href=#promisessuccesserrorthen>Promises - Success, Error, Then</a></li><li><a href=#advancedpromiseschaining>Advanced Promises - Chaining</a></li><li><a href=#advancedpromisesrouting>Advanced Promises - Routing</a></li><li><a href=#advancedpromisestipstricks>Advanced Promises - Tips & Tricks</a></li><li><a href=#thefutureofpromises>The Future of Promises</a></li><li><a href=#wrappingup>Wrapping Up</a></li></ol><h2 id=what-are-promises>What are Promises?</h2><p>I&rsquo;m going to try and be as succinct as possible - if anyone has a shorter, clearer description, let me know!</p><blockquote><p>A promise represents the eventual result of an operation. You can use a promise to specify what to do when an operation eventually succeeds or fails.</p></blockquote><p>So let&rsquo;s see this in action. Look at the code below:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;/api/my/name&#34;</span>);
</span></span></code></pre></div><p>This code uses the <code>$http</code> service to perform an HTTP GET on the url &lsquo;/api/my/name&rsquo;. Let&rsquo;s say that this is an api we&rsquo;ve implemented on our server that returns the name of the logged in user.</p><p>Now a common mistake for JavaScript newcomers might be to assume that the function returns the name:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// The WRONG way!
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;/api/my/name&#34;</span>);
</span></span></code></pre></div><p>It doesn&rsquo;t - and in fact it can&rsquo;t. An HTTP request has to be executed, it&rsquo;ll take a while before it returns - it might not return at all if there are errors. Remember, when we make requests in JavaScript we&rsquo;re using <strong>ajax</strong> which is <em><strong>asynchronous</strong> javascript and xml</em>. The key word here is asynchronous - we return control to the browser, let it make a request and give it a function to call when the request completes.</p><p>So let&rsquo;s see how you actually make the request.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>promise</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;/api/my/name&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>promise</span>.<span style=color:#a6e22e>success</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>name</span>) {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Your name is: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>name</span>);
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span><span style=color:#a6e22e>promise</span>.<span style=color:#a6e22e>error</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>, <span style=color:#a6e22e>status</span>) {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;The request failed with response &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; and status code &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>status</span>);
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>Now we use the promise object to specify what to do when the request succeeds, or when it fails. Remember, the functions we pass to <code>success</code> or <code>error</code> will be called later - when this block is finished executing we don&rsquo;t have the name, we&rsquo;ve just specified what to do when we <em>do</em> eventually get it - or what to do if we fail to get it.</p><p>As a convenience, the <code>success</code> and <code>error</code> functions actually just return the promise, so we can simplify the code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;/api/my/name&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>success</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>name</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Your name is: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>name</span>);
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>error</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>, <span style=color:#a6e22e>status</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;The request failed with response &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; and status code &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>status</span>);
</span></span><span style=display:flex><span>  });
</span></span></code></pre></div><p>In fact, <code>success</code> and <code>error</code> are special functions added to a promise by <code>$http</code> - normally with promises we just use <code>then</code>, which takes the success function as the first parameter and the error function as the second:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;/api/my/name&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(
</span></span><span style=display:flex><span>    <span style=color:#75715e>/* success */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Your name is: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>    },
</span></span><span style=display:flex><span>    <span style=color:#75715e>/* failure */</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;The request failed: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>  });
</span></span></code></pre></div><p>We&rsquo;ll see more about the difference between <code>success</code>, <code>error</code> and <code>then</code> later.</p><p>That&rsquo;s all there is to it - a promise lets us specify what to do as the result of an operation.</p><h2 id=how-do-promises-work>How do Promises Work?</h2><p>Promises are not actually complicated, they&rsquo;re objects that contain a reference to functions to call when something fails or succeeds.</p><p>Under the hood, AngularJS actually wires up a promise for an HTTP request in a way a bit like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>request</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>XMLHttpRequest</span>();
</span></span><span style=display:flex><span><span style=color:#a6e22e>request</span>.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;load&#34;</span>, <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// complete the promise
</span></span></span><span style=display:flex><span>}, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>request</span>.<span style=color:#a6e22e>addEventListener</span>(<span style=color:#e6db74>&#34;error&#34;</span>, <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>  <span style=color:#75715e>// fail the promise
</span></span></span><span style=display:flex><span>}, <span style=color:#66d9ef>false</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>request</span>.<span style=color:#a6e22e>open</span>(<span style=color:#e6db74>&#34;GET&#34;</span>, <span style=color:#e6db74>&#34;/api/my/name&#34;</span>, <span style=color:#66d9ef>true</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>request</span>.<span style=color:#a6e22e>send</span>();
</span></span></code></pre></div><p>this is pseudo-code, but the idea is that its the browser that calls us back, via the event listeners, then AngularJS can just call the appropriate method on the promise.</p><p>Now in AngularJS, the promises are created with the <code>$q</code> service (we&rsquo;ll see exactly how to do this shortly), but why <code>$q</code>?</p><p>The reason the service is named <code>$q</code> is that AngularJS&rsquo; promise implementation is based on Kris Kowal&rsquo;s promise mechanism, which is called &lsquo;Q&rsquo;. You can see the library at <a href=https://github.com/kriskowal/q>github.com/kristkowal/q</a>.</p><p>This was a deliberate decision, as the Q library is widely used and well understood by the community. We&rsquo;re going to see a little bit later what the future of promises is in AngularJS and actually in ECMAScript 6.</p><h3 id=a-real-world-example>A Real World Example</h3><p>In this example we&rsquo;ll create a service that gets the user&rsquo;s name, just like in our examples. However, to make it interesting, we&rsquo;ll set our service up so that the first time we get the name from the server, and then afterwards we&rsquo;ll return a cached copy.</p><p>This means we&rsquo;ll have to build our code to deal with the asynchronous case (the first one) and the more trivial synchronous case (getting the name from the cache).</p><p>Let&rsquo;s look at a pure asynchronous implementation.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>factory</span>(<span style=color:#e6db74>&#39;NameService&#39;</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>$http</span>, <span style=color:#a6e22e>$q</span>) {
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>//  Create a class that represents our name service.
</span></span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>NameService</span>() {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>self</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>;
</span></span><span style=display:flex><span>                      
</span></span><span style=display:flex><span>    <span style=color:#75715e>//  getName returns a promise which when 
</span></span></span><span style=display:flex><span>    <span style=color:#75715e>//  fulfilled returns the name.
</span></span></span><span style=display:flex><span>    <span style=color:#a6e22e>self</span>.<span style=color:#a6e22e>getName</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/my/name&#39;</span>);
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>NameService</span>();
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>Here&rsquo;s how it looks in a fiddle - just click &lsquo;Result&rsquo; to see it working. You can click on &lsquo;Update&rsquo; name to get the name, but each time it sends a request. This is what we&rsquo;ll change next.</p><iframe width=100% height=300 src=http://jsfiddle.net/dwmkerr/4GjtR/embedded/js,html,result allowfullscreen frameborder=0></iframe><p>Now let&rsquo;s update our service so that we hit the server only if we haven&rsquo;t already cached the name. I&rsquo;ll build the service blow by blow, then we can see a fiddle of it working.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>factory</span>(<span style=color:#e6db74>&#39;NameService&#39;</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>$http</span>, <span style=color:#a6e22e>$q</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//  Create a class that represents our name service.
</span></span></span><span style=display:flex><span>  <span style=color:#66d9ef>function</span> <span style=color:#a6e22e>NameService</span>() {
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>self</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>this</span>;
</span></span><span style=display:flex><span>        
</span></span><span style=display:flex><span>    <span style=color:#75715e>//  Initially the name is unknown....
</span></span></span><span style=display:flex><span>    <span style=color:#a6e22e>self</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span></code></pre></div><p>so first we create a service which is in the form of a class. It has a name field which is initially null.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>   <span style=color:#a6e22e>self</span>.<span style=color:#a6e22e>getName</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>     <span style=color:#75715e>//  Create a deferred operation.
</span></span></span><span style=display:flex><span>     <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>deferred</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>$q</span>.<span style=color:#a6e22e>defer</span>();
</span></span></code></pre></div><p>Now in the <code>getName</code> function we start by creating a <code>deferred</code> object, using the <code>$q</code> service. This object contains the promise we&rsquo;ll return, and has some helper functions to let us build the promise.</p><p>We create a deferred object because whether we use ajax or not, we want the consumer to use the promise - even if we <em>can</em> return straightaway in some circumstances (when we have the name) we can&rsquo;t in all - so the caller must always expect a promise.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>    <span style=color:#66d9ef>if</span>(<span style=color:#a6e22e>self</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>!==</span> <span style=color:#66d9ef>null</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>deferred</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>self</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; (from Cache!)&#34;</span>);
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>If we already have the name, we can just <code>resolve</code> the deferred object immediately - this is the easy case. I&rsquo;ve added &lsquo;from cache&rsquo; to the name so we can see when it comes from the cache compared to the server.</p><blockquote><p><strong>Tip:</strong> You can resolve a promise even before you return it. It still works fine for the consumer.</p></blockquote><p>Finally, we can handle the case if we don&rsquo;t already have the name:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>    <span style=color:#66d9ef>else</span> {
</span></span><span style=display:flex><span>      <span style=color:#75715e>//  Get the name from the server.
</span></span></span><span style=display:flex><span>      <span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/my/name/&#39;</span>)
</span></span><span style=display:flex><span>         .<span style=color:#a6e22e>success</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>name</span>) {
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>self</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>name</span>;
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>deferred</span>.<span style=color:#a6e22e>resolve</span>(<span style=color:#a6e22e>name</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; (from Server!)&#34;</span>);
</span></span><span style=display:flex><span>         })
</span></span><span style=display:flex><span>         .<span style=color:#a6e22e>error</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>deferred</span>.<span style=color:#a6e22e>reject</span>(<span style=color:#a6e22e>response</span>);
</span></span><span style=display:flex><span>         });
</span></span><span style=display:flex><span>     }
</span></span></code></pre></div><p>So if we get success from the server, we can <code>resolve</code> the promise. Otherwise, we <code>reject</code> it, which means failure.</p><blockquote><p>Call <code>resolve</code> on a deferred object to complete it successfully, call <code>reject</code> to fail it with an error.</p></blockquote><p>Finally, we just return the promise we&rsquo;ve built with <code>deferred</code>:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span>   <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>deferred</span>.<span style=color:#a6e22e>promise</span>;
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>And that&rsquo;s it! You can see it in action below, press &lsquo;Update Name&rsquo; a few times and you&rsquo;ll see it uses the cache.</p><iframe width=100% height=300 src=http://jsfiddle.net/dwmkerr/LeZU4/embedded/result,html,js allowfullscreen frameborder=0></iframe><p>How do we use this? We&rsquo;ll it&rsquo;s simple, here&rsquo;s a controller that uses the service we&rsquo;ve built:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>controller</span>(<span style=color:#e6db74>&#39;MainController&#39;</span>, <span style=color:#66d9ef>function</span> (<span style=color:#a6e22e>$scope</span>, <span style=color:#a6e22e>NameService</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>  <span style=color:#75715e>//  We have a name on the code, but it&#39;s initially empty...
</span></span></span><span style=display:flex><span>  <span style=color:#a6e22e>$scope</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#e6db74>&#34;&#34;</span>;
</span></span><span style=display:flex><span>  
</span></span><span style=display:flex><span>  <span style=color:#75715e>//  We have a function on the scope that can update the name.
</span></span></span><span style=display:flex><span>  <span style=color:#a6e22e>$scope</span>.<span style=color:#a6e22e>updateName</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>() {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>NameService</span>.<span style=color:#a6e22e>getName</span>()
</span></span><span style=display:flex><span>      .<span style=color:#a6e22e>then</span>(
</span></span><span style=display:flex><span>      <span style=color:#75715e>/* success function */</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>name</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>$scope</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>name</span>;
</span></span><span style=display:flex><span>      },
</span></span><span style=display:flex><span>      <span style=color:#75715e>/* error function */</span>
</span></span><span style=display:flex><span>      <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>result</span>) {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Failed to get the name, result is &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>result</span>); 
</span></span><span style=display:flex><span>      });
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>Now there&rsquo;s something different here. Before, we might have used the <code>error</code> or <code>success</code> function of the promise. But here we use <code>then</code>. Why is that?</p><blockquote><p><code>success</code> and <code>error</code> are functions on a promise that AngularJS adds for us when using <code>$http</code> or <code>$resource</code>. They&rsquo;re not standard, you won&rsquo;t find them on other promises.</p></blockquote><p>So we&rsquo;ve seen how promises work, what they are and so on, now we&rsquo;ll look into this success/error/then stuff.</p><h2 id=promises---success-error-then>Promises - Success, Error, Then</h2><p>Now we know that <code>$http</code> returns a promise, and we know that we can call <code>success</code> or <code>error</code> on that promise. It would be sensible to think that these functions are a standard part of promise - but they&rsquo;re not!</p><p>When you are using a promise, the function you should call is <code>then</code>. <code>then</code> takes two parameters - a callback function for success and a callback function for failure. Taking a look at our original <code>$http</code> example, we can rewrite it to use this function.
So this code:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;/api/my/name&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>success</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>name</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Your name is: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>name</span>);
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>error</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>, <span style=color:#a6e22e>status</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;The request failed with response &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>+</span> <span style=color:#e6db74>&#34; and status code &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>status</span>);
</span></span><span style=display:flex><span>  };
</span></span></code></pre></div><p>becomes:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#34;/api/my/name&#34;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Your name is: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>);
</span></span><span style=display:flex><span>  }, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>result</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;The request failed: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>result</span>);
</span></span><span style=display:flex><span>  };
</span></span></code></pre></div><p>We <strong>can</strong> use <code>success</code> or <code>error</code> when using <code>$http</code> - it&rsquo;s convenient. For one thing, the <code>error</code> function gives us a response and status (and more) and the <code>success</code> function gives us the response data (rather than the full response object).</p><p>But remember that it&rsquo;s not a standard part of a promise. You can can add your own versions of these functions to promises you build yourself if you want:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>promise</span>.<span style=color:#a6e22e>success</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>fn</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>promise</span>.<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>fn</span>(<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>, <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>status</span>, <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>headers</span>, <span style=color:#a6e22e>config</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>promise</span>;
</span></span><span style=display:flex><span>  };
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>promise</span>.<span style=color:#a6e22e>error</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>fn</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>promise</span>.<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>null</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>      <span style=color:#a6e22e>fn</span>(<span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>, <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>status</span>, <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>headers</span>, <span style=color:#a6e22e>config</span>);
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>promise</span>;
</span></span><span style=display:flex><span>  };
</span></span></code></pre></div><p>this is exactly how angular does it.</p><p>So what&rsquo;s the advice?</p><blockquote><p>Use <code>success</code> or <code>error</code> with <code>$http</code> promises if you want to - just remember they&rsquo;re not standard, and the parameters are different to those for <code>that</code> callbacks.</p></blockquote><p>So if you change your code so that your promise is not returned from <code>$http</code>, as we did in the earlier example when we load data from a cache, your code will break if you expect <code>success</code> or <code>error</code> to be there.</p><p>A safe approach is to use <code>then</code> wherever possible.</p><h2 id=advanced-promises---chaining>Advanced Promises - Chaining</h2><p>If you&rsquo;ve had your fill of promises for now, you can skip to <a href=#thefutureofpromises>The Future of Promises</a> or <a href=#wrappingup>Wrapping Up</a>.</p><p>One useful aspect of promises is that the <code>then</code> function returns the promise itself. This means that you can actually <em>chain</em> promises, to create conscise blocks of logic that are executed at the appropriate times, without lots of nesting.</p><p>Let&rsquo;s consider an example where we need to fetch the user&rsquo;s name from the backend, but we have to use separate requests to get their profile information and then their application permissions.</p><p>Here&rsquo;s an example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>details</span> {
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>username</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>profile</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>,
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>permissions</span><span style=color:#f92672>:</span> <span style=color:#66d9ef>null</span>
</span></span><span style=display:flex><span>};
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/user/name&#39;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>     <span style=color:#75715e>// Store the username, get the profile.
</span></span></span><span style=display:flex><span>     <span style=color:#a6e22e>details</span>.<span style=color:#a6e22e>username</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>     <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/profile/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>details</span>.<span style=color:#a6e22e>username</span>);
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>  	<span style=color:#75715e>//	Store the profile, now get the permissions.
</span></span></span><span style=display:flex><span>    <span style=color:#a6e22e>details</span>.<span style=color:#a6e22e>profile</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/security/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>details</span>.<span style=color:#a6e22e>username</span>);
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>  	<span style=color:#75715e>//	Store the permissions
</span></span></span><span style=display:flex><span>    <span style=color:#a6e22e>details</span>.<span style=color:#a6e22e>permissions</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;The full user details are: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>details</span>);
</span></span><span style=display:flex><span>  });
</span></span></code></pre></div><p>Now we have a series of asynchronous calls that we can coordinate without having lots of nested callbacks.</p><p>We can also greatly simplify error handling - let&rsquo;s see the example again, with an exception thrown in:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/user/name&#39;</span>)
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>     <span style=color:#75715e>// Store the username, get the profile.
</span></span></span><span style=display:flex><span>     <span style=color:#a6e22e>details</span>.<span style=color:#a6e22e>username</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>     <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>$http</span>.<span style=color:#a6e22e>get</span>(<span style=color:#e6db74>&#39;/api/profile/&#39;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>details</span>.<span style=color:#a6e22e>username</span>);
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>  	<span style=color:#75715e>//	Store the profile, now get the permissions.
</span></span></span><span style=display:flex><span>    <span style=color:#a6e22e>details</span>.<span style=color:#a6e22e>profile</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>throw</span> <span style=color:#e6db74>&#34;Oh no! Something failed!&#34;</span>;
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>response</span>) {
</span></span><span style=display:flex><span>  	<span style=color:#75715e>//	Store the permissions
</span></span></span><span style=display:flex><span>    <span style=color:#a6e22e>details</span>.<span style=color:#a6e22e>permissions</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>data</span>;
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;The full user details are: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>JSON</span>.<span style=color:#a6e22e>stringify</span>(<span style=color:#a6e22e>details</span>);
</span></span><span style=display:flex><span>  })
</span></span><span style=display:flex><span>  .<span style=color:#66d9ef>catch</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>error</span>) {
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;An error occured: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>error</span>);
</span></span><span style=display:flex><span>  });
</span></span></code></pre></div><p>We can use <code>catch(callback)</code> - which is actually just shorthand for <code>then(null, callback)</code>. There&rsquo;s even a <code>finally</code> - which is executed whether or not the operations fail or succeed.</p><blockquote><p>Use <code>catch</code> and for error handling with promises - and use <code>finally</code> for logic that&rsquo;s executed after success OR failure.</p></blockquote><p>The composition of promises can simplify complicated code - particularly when you add in error handling!</p><p>One final point to make which is not quite related to chaining but does relate to multiple promises is <code>$q.all</code>. <code>all</code> can be used to build a single promise from a set of promises.</p><p>You can pass an array of promises to <code>all</code> and you get back a single promise - which is resolved when all of the promises it contains resolve. This can be useful if you are building complex methods that may have to perform multiple asynchronous tasks - such as multiple ajax calls.</p><h2 id=advanced-promises---routing>Advanced Promises - Routing</h2><p>There&rsquo;s a particular area of AngularJS that uses promises to great effect, and that&rsquo;s the router.</p><p>Let&rsquo;s imagine we have a router like the following:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>$routeProvider</span>
</span></span><span style=display:flex><span>   .<span style=color:#a6e22e>when</span>(<span style=color:#e6db74>&#39;/home&#39;</span>, {
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>templateUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;home.html&#39;</span>,
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>controller</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;MainController&#39;</span>
</span></span><span style=display:flex><span>   })
</span></span><span style=display:flex><span>   .<span style=color:#a6e22e>when</span>(<span style=color:#e6db74>&#39;/profile&#39;</span>, {
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>templateUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;profile.html&#39;</span>,
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>controller</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ProfileController&#39;</span>
</span></span><span style=display:flex><span>   })
</span></span></code></pre></div><p>Here we have two routes. The home route takes us to the home page, with the <code>MainController</code>, and the profile route takes us to the user&rsquo;s profile page.</p><p>Our ProfileController uses our funky name service:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>controller</span>(<span style=color:#e6db74>&#39;ProfileController&#39;</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>$scope</span>, <span style=color:#a6e22e>NameService</span>) {
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>$scope</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>null</span>;
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>NameService</span>.<span style=color:#a6e22e>getName</span>().<span style=color:#a6e22e>then</span>(<span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>name</span>) {
</span></span><span style=display:flex><span>    	<span style=color:#a6e22e>$scope</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>name</span>;
</span></span><span style=display:flex><span>    });
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>The problem is, <strong>until the name service gets the name from the backend, the name is null</strong>. This means if our view binds to the name, it&rsquo;ll flicker - first it&rsquo;s empty then its set.</p><p>What we&rsquo;d like to do is actully say to the router - &ldquo;I&rsquo;m going to go to this view, but only when you can tell me my name&rdquo;.</p><p>We can do this with the <em>resolves</em> in the router, here&rsquo;s how it works:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#75715e>// Create a function that uses the NameService 
</span></span></span><span style=display:flex><span><span style=color:#75715e>// to return the getName promise.
</span></span></span><span style=display:flex><span><span style=color:#66d9ef>var</span> <span style=color:#a6e22e>getName</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>NameService</span>) {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> <span style=color:#a6e22e>NameService</span>.<span style=color:#a6e22e>getName</span>();
</span></span><span style=display:flex><span>    };
</span></span><span style=display:flex><span>    
</span></span><span style=display:flex><span><span style=color:#a6e22e>$routeProvider</span>
</span></span><span style=display:flex><span>   .<span style=color:#a6e22e>when</span>(<span style=color:#e6db74>&#39;/home&#39;</span>, {
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>templateUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/home.html&#39;</span>,
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>controller</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;MainController&#39;</span>
</span></span><span style=display:flex><span>   })
</span></span><span style=display:flex><span>   .<span style=color:#a6e22e>when</span>(<span style=color:#e6db74>&#39;/profile&#39;</span>, {
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>templateUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/profile.html&#39;</span>,
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>controller</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ProfileController&#39;</span>,
</span></span><span style=display:flex><span>       <span style=color:#75715e>/* only navigate when we&#39;ve resolved these promises */</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>resolve</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>getName</span>
</span></span><span style=display:flex><span>       }
</span></span><span style=display:flex><span>   })
</span></span></code></pre></div><p>so now we have a <em>resolve</em> on the route - when we go to the profile page the router will wait until the promise returned by <code>getName</code> resolves, then it will pass the result into the controller, as the parameter called <code>name</code>. Now our controller looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>app</span>.<span style=color:#a6e22e>controller</span>(<span style=color:#e6db74>&#39;ProfileController&#39;</span>, <span style=color:#66d9ef>function</span>(<span style=color:#a6e22e>$scope</span>, <span style=color:#a6e22e>name</span>) {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#a6e22e>$scope</span>.<span style=color:#a6e22e>name</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>name</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><p>Much better! And also <strong>much</strong> more testable.</p><p>One thing you may wonder - why do I use <code>getName</code> as the resolve function instead of just using <code>NameService.getName</code> directly?</p><p>That&rsquo;s because the route is set up in a <code>config</code> function - and that function cannot have services injected. However, a resolve function <strong>can</strong>, so we just use a function and let AngularJS inject the <code>NameService</code> for us.</p><p>Now for an important statement:</p><blockquote><p>If the first thing your controller does is fetch data from the server, it&rsquo;s probably wrong.</p></blockquote><p>Why? Because if your controller needs data, inject it - let the router ensure the data is ready. Then you don&rsquo;t have controllers in an invalid state as they&rsquo;re loading - and your controllers become easier to test.</p><p>Be aware of <code>resolve</code> for routes - it&rsquo;s a great way to handle loading of required data, authentication and other things that you might be putting into the wrong place.</p><p>You can see the example above in action here:</p><iframe width=100% height=300 src=http://jsfiddle.net/dwmkerr/m29pe/embedded/result,js,html allowfullscreen frameborder=0></iframe><p>What&rsquo;s cool is we can also see our caching logic by going to and from the Home and Profile pages. The promises are keeping our code clean and testable.</p><p>As a final note on promises when routing, you can specify multiple resolves if you need to:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-js data-lang=js><span style=display:flex><span><span style=color:#a6e22e>$routeProvider</span>
</span></span><span style=display:flex><span>   .<span style=color:#a6e22e>when</span>(<span style=color:#e6db74>&#39;/profile&#39;</span>, {
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>templateUrl</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;/profile.html&#39;</span>,
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>controller</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#39;ProfileController&#39;</span>,
</span></span><span style=display:flex><span>       <span style=color:#75715e>/* only navigate when we&#39;ve resolved these promises */</span>
</span></span><span style=display:flex><span>       <span style=color:#a6e22e>resolve</span><span style=color:#f92672>:</span> {
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>getName</span>,
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>profile</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>getProfile</span>,
</span></span><span style=display:flex><span>           <span style=color:#a6e22e>anythingElse</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>getAnythingElse</span>
</span></span><span style=display:flex><span>       }
</span></span><span style=display:flex><span>   })
</span></span></code></pre></div><p>in this case each resolve is injected into the controller.</p><h2 id=advanced-promises---tips--tricks>Advanced Promises - Tips & Tricks</h2><p>This section just contains some tips and tricks you might find useful when working with promises.</p><ol><li>Promises in directives are not resolved automatically since AngularJS 1.2. Previously, if you passed a promise to a directive with an &lsquo;=&rsquo; binding, AngularJS would resolve the promise for you, this is no longer the case.</li></ol><h2 id=the-future-of-promises>The Future of Promises</h2><p>So promises are a core part of AngularJS and to use the framework effectively, you must understand how to use them and how they work. But what is the future of promises?</p><p>It&rsquo;s almost certain that promises are going to become a <strong>native</strong> feature of JavaScript, they are part of the proposed ECMAScript 6 specification.</p><p>The functionality of the <code>q</code> library and AngularJS&rsquo; implementation of promises are very similar indeed to the proposed specification, but be aware that when promises become standard, AngularJS is most likely to adapt their own promises to work like native promises.</p><p>You can read more at <a href=http://www.html5rocks.com/en/tutorials/es6/promises/>html5rocks.com/en/tutorials/es6/promises/</a>.</p><p>Just be aware that you&rsquo;ll see promises more and more, in other frameworks and in vanilla JavaScript.</p><h2 id=wrapping-up>Wrapping Up</h2><p>I hope this post has been useful to understanding promises. Any feedback is always good, so let me know if anything is unclear or could be improved. To finish this article, here are some useful links:</p><ul><li><strong>The Q library</strong> <a href=https://github.com/kriskowal/q>github.com/kriskowal/q</a></li><li><strong>The AngularJS <code>$q</code> Service</strong> <a href=https://docs.angularjs.org/api/ng/service/$q>docs.angularjs.org/api/ng/service/$q</a></li><li><strong>Promises in ECMAScript 6</strong> <a href=http://www.html5rocks.com/en/tutorials/es6/promises/>html5rocks.com/en/tutorials/es6/promises/</a></li><li><strong>XmlHttpRequest, which we used in an example</strong> <a href=https://developer.mozilla.org/en/docs/Web/API/XMLHttpRequest>developer.mozilla.org/en/docs/Web/API/XMLHttpRequest</a></li></ul><p>And also some interesting discussions:</p><p><a href=http://spion.github.io/posts/why-i-am-switching-to-promises.html>Why I am switching to promises</a> - Written by Gorgi Kosev, great article describing why a switch from callbacks to promises can be a very good thing in NodeJS applications.</p><p><a href=http://blog.ometer.com/2011/07/24/callbacks-synchronous-and-asynchronous/>Callbacks, sychronous and asynchronous</a> - From Havoc, this post contains many useful points for API writers who are using callbacks or promises. One key takeaway is to <strong>never</strong> do what a sample in this article does which is resolve a promise either synchronously or asynchronously, as it leads to code which can be difficult to reason about. I&rsquo;ll be mentioning this more in a later update which will explain the problem and solution.</p><p><a href=http://blog.izs.me/post/59142742143/designing-apis-for-asynchrony>Designing for Asynchrony</a> - Written by Isaac Z. Schlueter, this post is another great one for API designers that takes a look into asynchrony.</p></section><div class=c-tags><a href=https://dwmkerr.github.io/dwmkerr.com/pr-preview/pr-52/tags/angularjs class=c-tag>AngularJS</a>
<a href=https://dwmkerr.github.io/dwmkerr.com/pr-preview/pr-52/tags/codeproject class=c-tag>CodeProject</a>
<a href=https://dwmkerr.github.io/dwmkerr.com/pr-preview/pr-52/tags/javascript class=c-tag>JavaScript</a>
<a href=https://dwmkerr.github.io/dwmkerr.com/pr-preview/pr-52/tags/ecmascript-6 class=c-tag>ECMAScript 6</a></div><div class=c-article-date><time datetime=2014-05-07T12:06:55Z>May 7, 2014</time></div><footer><div id=disqus_thread></div><script>var disqus_shortname="dwmkerr";(function(){var e=document,t=e.createElement("script");t.src="https://"+disqus_shortname+".disqus.com/embed.js",t.setAttribute("data-timestamp",+new Date),(e.head||e.body).appendChild(t)})()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><nav class="p-pagination c-pagination"><div class=c-pagination__ctrl><div class=c-pagination__newer><a href=https://dwmkerr.github.io/dwmkerr.com/pr-preview/pr-52/practical-angularjs/>Newer</a></div><div class=c-pagination__older><a href=https://dwmkerr.github.io/dwmkerr.com/pr-preview/pr-52/better-specifications/>Older</a></div></div></nav><section class=p-related><h3>See Also</h3><div class=p-related__list><div class="swiper swiper-container"><ul class=swiper-wrapper><li class="p-related__item swiper-slide"><a href=/dwmkerr.com/pr-preview/pr-52/better-specifications/><span>Better Specifications</span></a></li><li class="p-related__item swiper-slide"><a href=/dwmkerr.com/pr-preview/pr-52/practical-angularjs-part-2/><span>Practical AngularJS Part 2</span></a></li><li class="p-related__item swiper-slide"><a href=/dwmkerr.com/pr-preview/pr-52/langtons-ant-in-javascript/><span>Langton's Ant in Javascript</span></a></li><li class="p-related__item swiper-slide"><a href=/dwmkerr.com/pr-preview/pr-52/introducing-practical-angularjs/><span>Introducing Practical AngularJS</span></a></li><li class="p-related__item swiper-slide"><a href=/dwmkerr.com/pr-preview/pr-52/codeproject-mvp/><span>CodeProject MVP</span></a></li><li class="p-related__item swiper-slide"><a href=/dwmkerr.com/pr-preview/pr-52/codeproject-competition/><span>CodeProject Competition</span></a></li></ul></div><div class=related-prev></div><div class=related-next></div></div></section><aside class=p-author><div class="c-avatar p-author__avatar"><img alt="Author Avatar" src=/images/avatar.jpeg></div><div class=p-author__body><p class="c-title p-author__name">Dave Kerr</p><p>Climber, Coder, Technology Consultant. Views expressed are my own.</p></div></aside></footer></article></main><nav class="l-nav p-menu"><ul class=p-menu__lists><li class=p-menu__listitem><a href=/dwmkerr.com/pr-preview/pr-52/>Blog</a></li><li class=p-menu__listitem><a href=/dwmkerr.com/pr-preview/pr-52/page/speaking/>Speaking</a></li><li class=p-menu__listitem><a href=/dwmkerr.com/pr-preview/pr-52/page/about/>About</a></li></ul></nav><footer class=l-footer><ul class=c-links><li class=c-links__item><a href=https://github.com/dwmkerr target=_blank><svg viewBox="0 0 64 64" class="c-links__icon"><title>github</title><use xlink:href="#icon-github"/></svg></a></li><li class=c-links__item><a href=https://linkedin.com/in/dwmkerr target=_blank><svg viewBox="0 0 64 64" class="c-links__icon"><title>linkedin</title><use xlink:href="#icon-linkedin"/></svg></a></li></ul><p class=p-copyright>Copright &copy; Dave Kerr</p></footer><script type=text/javascript src=https://dwmkerr.github.io/dwmkerr.com/pr-preview/pr-52/js/bundle.js defer></script></body></html>