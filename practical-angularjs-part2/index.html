<!doctype html><html prefix="og: http://ogp.me/ns#"><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><title>Practical AngularJS Part 2 – Components of an AngularJS Application &#183; Dave Kerr</title><meta name=description content="Welcome to Part 2 of Practical AngularJS. I’m going to introduce you to some of the core components of an angular app. These are:
 Controllers Filters Directives Services Views & Routes  We’re not going to be going into detail – just taking a look at what each of these components are and where they fit into the structure of an app. We’ll be going into detail for each of them in later articles."><meta name=HandheldFriendly content="True"><meta name=MobileOptimized content="320"><meta name=generator content="Hugo 0.61.0"><meta name=robots content="index,follow"><meta name=viewport content="width=device-width,initial-scale=1"><meta property="og:title" content="Practical AngularJS Part 2 – Components of an AngularJS Application"><meta property="og:description" content="Welcome to Part 2 of Practical AngularJS. I’m going to introduce you to some of the core components of an angular app. These are:
 Controllers Filters Directives Services Views & Routes  We’re not going to be going into detail – just taking a look at what each of these components are and where they fit into the structure of an app. We’ll be going into detail for each of them in later articles."><meta property="og:type" content="article"><meta property="og:url" content="https://dwmkerr.github.io/dwmkerr.com/practical-angularjs-part2/"><link rel=stylesheet href=https://dwmkerr.github.io/dwmkerr.com/dist/styles.css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,600,700,300&subset=latin,cyrillic-ext,latin-ext,cyrillic"><link rel=stylesheet href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css integrity=sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN crossorigin=anonymous></head><body><script type=application/javascript>var dnt=(navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack);var doNotTrack=(dnt=="1"||dnt=="yes");if(!doNotTrack){(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');ga('create','UA-41728580-1','auto');ga('set','anonymizeIp',true);ga('send','pageview');}</script><div id=wrapper><header class=site-header><div class=container><div class=site-title-wrapper><h1 class=site-title><a title=dwmkerr.com href=https://dwmkerr.github.io/dwmkerr.com/>dwmkerr.com</a></h1><a class=button-square href=https://dwmkerr.github.io/dwmkerr.com/index.xml><i class="fa fa-rss"></i></a><a class="button-square button-social hint--top" data-hint=Twitter title=Twitter href=https://twitter.com/dwmkerr rel=me><i class="fa fa-twitter"></i></a><a class="button-square button-social hint--top" data-hint=Github title=Github href=https://github.com/dwmkerr rel=me><i class="fa fa-github-alt"></i></a><a class="button-square button-social hint--top" data-hint="Stack Overflow" title="Stack Overflow" href=https://stackoverflow.com/users/1189164/dave-kerr rel=me><i class="fa fa-stack-overflow"></i></a><a class="button-square button-social hint--top" data-hint=LinkedIn title=LinkedIn href=https://www.linkedin.com/in/dwmkerr/ rel=me><i class="fa fa-linkedin"></i></a></div><ul class=site-nav><li class=site-nav-item><a title=Blog href=/dwmkerr.com/>Blog</a></li><li class=site-nav-item><a title=Speaking href=/dwmkerr.com/page/speaking/>Speaking</a></li><li class=site-nav-item><a title=About href=/dwmkerr.com/page/about/>About</a></li></ul></div></header><div id=container><div class=container><article class=post-container itemscope itemtype=http://schema.org/BlogPosting><header class=post-header><h1 class=post-title itemprop="name headline">Practical AngularJS Part 2 – Components of an AngularJS Application</h1><p class="post-date post-line"><span>Published <time datetime=2014-05-07 itemprop=datePublished>Wed, May 7, 2014</time></span>
<span>by</span>
<span itemscope itemprop=author itemtype=https://schema.org/Person><span itemprop=name><a href=https://github.com/dwmkerr itemprop=url rel=author>Dave Kerr</a></span></span></p></header><div class="post-content clearfix" itemprop=articleBody><p>Welcome to Part 2 of Practical AngularJS. I’m going to introduce you to some of the core components of an angular app. These are:</p><ul><li>Controllers</li><li>Filters</li><li>Directives</li><li>Services</li><li>Views & Routes</li></ul><p>We’re not going to be going into detail – just taking a look at what each of these components are and where they fit into the structure of an app. We’ll be going into detail for each of them in later articles.</p><h2 id=controllers>Controllers</h2><p>Controllers are objects that manage the state of part of a page. The state is stored in the scope - the scope is an object that holds all of the state needed to render the page. We use a controller to add state and functionality to the scope, it's that simple.</p><p>A controller is normally going to be written for a logical chunk of the user interface of an application, such as a &lsquo;Create Something&rsquo; form, &lsquo;Edit Something&rsquo; popup and so on.</p><p>Controllers are dealt with in Practical <a href=http://www.dwmkerr.com/practical-angularjs-part1/>AngularJS Part 1 - Introducing AngularJS</a> but let's have a quick refresh. Here's a controller for the UI for a list of cartoon characters.</p><iframe src=http://jsfiddle.net/dwmkerr/8Ts9u/embedded/js,html,result width=100% height=300></iframe><p>Here's the points that you should take from the refresher:</p><ul><li>Controllers create state on the $scope</li><li>Controllers expose functionality by adding functions to the $scope</li><li>Controllers are written for a logical portion of the UI</li></ul><h3 id=a-note-on-the-controller-as-syntax>A Note on the Controller &lsquo;as&rsquo; Syntax</h3><p>As of Angular 1.2 it is possible to use a controller with the &lsquo;as&rsquo; syntax, such as:</p><pre><code class=language-language-markup data-lang=language-markup>&lt;div ng-controller=&quot;CharacterController as controller&quot;&gt;
  &lt;p ng-text=&quot;controller.something&quot;&gt;&lt;/p&gt;
&lt;/div&gt;
</code></pre><p>The only problem is with approach is that it's not just a decision you have to make on the view, but also in the controller. Normal controllers add to the $scope, controllers used with the &lsquo;as&rsquo; syntax add to themselves and the controller itself is added to the scope with the given name.</p><p>My personal preference is for the &lsquo;as&rsquo; syntax - it makes directives less ambiguous when there are nested scopes. However, until the feature is set up so that the coder can use &lsquo;as&rsquo; or not without having to change the controller code, I suggest that you pick one approach or the other and stick to it.</p><h3 id=quick-tips-for-controllers>Quick Tips for Controllers</h3><p>Don't put everything on <code>$scope</code> - only put functions and data you want to expose to the view on <code>$scope</code> and keep all other data private to the controller.
Keep your controllers focused, if they get very large you probably need to break it into smaller controllers.</p><h2 id=filters>Filters</h2><p>Filters are simple units of logic that format data, let's see some:</p><iframe src=http://jsfiddle.net/dwmkerr/XPqL8/embedded/html,result width=100% height=150></iframe><p>You can use filters in any expression - you pass a value through a filter by using the vertical pipe symbol. Filters can also take parameters, which come after the colon. AngularJS has a bunch of built in filters that are very useful, such as date, currency, orderBy and sortBy.</p><p>Let's create our own filter now. Assume that in our app we are showing statuses in lots of places - either Success, Warning or Error. But in our app our statuses come back as numbers, 0 is error, 1 is warning and 2 is success. Here's how we could write a filter to show the text:</p><iframe src=http://jsfiddle.net/dwmkerr/DVb9B/embedded/html,js,result width=100% height=150></iframe><p>Filters are simple and they're really useful. They'll become an important part of your angular toolkit. They also lead us nicely onto Directives.</p><h3 id=quick-tips-for-filters>Quick Tips for Filters</h3><ul><li>Learn the out-of-the box filters, particularly date, currency and number.</li><li>Filters can take any number of parameters.</li><li>Although filters can take parameters and are highly adaptable, if you're doing more than what is essentially formatting then you should probably be using a directive.</li></ul><h2 id=directives>Directives</h2><p>Directives are powerful re-usable units of logic and UI that can be dropped into your application. A directive is written in the HTML of your page, it can be an element, class or attribute. Angular then compiles these directives by adding HTML for them and linking in functionality.</p><p>Let's take a look at our earlier example, we have a number which represents a status. We'll make a &lsquo;status&rsquo; directive that shows the status text, in an appropriate colour.</p><iframe src=http://jsfiddle.net/dwmkerr/3T2W6/embedded/html,js,css,result width=100% height=300></iframe><p>Let's break down what we've got here.</p><pre><code class=language-language-markup data-lang=language-markup>&lt;app-status status-value=&quot;0&quot;&gt;&lt;/app-status&gt;
</code></pre><p>First we have the directive in HTML - Angular knows that it can map hyphens to camel-case, so we can use &lsquo;appStatus&rsquo; as the directive name.</p><pre><code class=language-language-javascript data-lang=language-javascript>.directive('appStatus', function() {
 return {
</code></pre><p>Now we actually create the directive. A directive is normally just a function that returns an object with a specific format.</p><pre><code class=language-language-javascript data-lang=language-javascript>restrict: 'E',
</code></pre><p>&lsquo;Restrict&rsquo; allows us to state that the directive can only be used in certain ways. E is for element, A for attribute and C for class.</p><pre><code class=language-language-javascript data-lang=language-javascript>template: '&lt;div ng-class=&quot;statusClass&quot;&gt;{{statusValue | status}}&lt;/div&gt;',
</code></pre><p>The template just contains that HTML to use for the directive. It can contain filters. You can also use &lsquo;templateHtml&rsquo; and specify a path to an HTML file if that's more convenient.</p><pre><code class=language-language-javascript data-lang=language-javascript>scope: {
 statusValue: '='
 },
</code></pre><p>Slightly more complex - &lsquo;scope&rsquo; lets us determine what values we want on the scope and where they come from. Using the equals sign means perform a two-way databind to the property with the same name as is on the parent scope. You can use an ampersand for one-way binding.</p><p>In this directive we're using the scope to allow us to pass the status as an attribute. We'll see a lot more of this in later tutorials, so don't worry if it seems a bit cryptic at the moment.</p><pre><code class=language-language-javascript data-lang=language-javascript>link: function($scope) {
 switch($scope.statusValue) {
 case 0: $scope.statusClass = &quot;red&quot;; break;
 case 1: $scope.statusClass = &quot;orange&quot;; break;
 case 2: $scope.statusClass = &quot;green&quot;; break;
 }
}
</code></pre><p>Link is the function that is called when the HTML elements have been created - you can use this function to add data to the scope, work with the generated elements or attributes. Again, we'll be seeing more of this later.</p><p>The more you work with angular, the more you'll see how directives allow you to create re-usable user interface components. We're going to see them again and again in this series, but for now it's sufficient to know that they are there and what they can be used for.</p><h3 id=quick-tips-for-directives>Quick Tips for Directives</h3><ul><li>If you need to include content in your directive tags, look into transclude.</li><li>If you need the actually DOM tree element generated, you can get it in the link function.</li><li>Learn the syntax for &lsquo;scope&rsquo; on a directive - it's important to use the right binding mechanisms for everything you bring into the scope.</li><li>Learn, learn, learn, we've only glimpsed at directives, writing directives is a large part of angular development.</li></ul><h2 id=services>Services</h2><p>Services let you define logic that can be shared between different components. You can inject services into controllers, directives and other components.</p><p>Let's say that we want to monitor from the client how long it's taking to get to the server, by sending a request every second. If the round trip time gets too low, we want to show a warning. Now if we implemented this logic in a controller, it would be tied to some UI. But actually, the logic isn't associated with any UI at all - we want an isolated component that is responsible for getting this information, that can expose it to any other component on the client.</p><p>Here's how such a service would look in an angular application. Note: jsfiddle takes about 10 seconds to handle the first ajax ping request.</p><iframe src=http://jsfiddle.net/dwmkerr/YZF4T/embedded/html,js,result width=100% height=300></iframe><p>Although the output is not very impressive, what's important to remember is that all of the state and logic relating to the ping mechanism can be kept with the service - and used from any component. Well designed services will greatly improve the structure of your code and its testability.</p><h3 id=service-quick-tips>Service Quick Tips</h3><ul><li>Services are singletons.</li><li>Services don't have to be classes as I've defined.</li><li>Services shouldn't need to ever think about the DOM - if they do, you should probably be writing a directive.</li></ul><h2 id=views--routes>Views & Routes</h2><p>AngularJS has a routing mechanism that allows you to create deep linking in your site. You can configure the $routeProvider service to specify what urls will go to which pages. Here's a brief example:</p><iframe src=http://jsfiddle.net/dwmkerr/sQZ6J/embedded/html,js,result width=100% height=300></iframe><p>Typically the views are not defined as script elements in the main page, I'm just doing it like this to get past the fact that jsfiddle only has one HTML page. Every time the user clicks on a url, angular checks to see if it can match it in the route provider. If it can, it creates the appropriate view and a new instance of the controller. If it can't, it uses the &lsquo;otherwise&rsquo; route.</p><p>Let's take a look at the route provider in a bit more detail:</p><pre><code class=language-language-javascript data-lang=language-javascript>// Configure the route provider.
app.config(function($routeProvider) {
 $routeProvider.
 when('/home', {
   template: '&lt;h2&gt;Home&lt;/h2&gt;',
   controller: 'HomeController'
 }).
 when('/contact', {
   template: '&lt;h2&gt;Contact&lt;/h2&gt;',
   controller: 'ContactController'
 }).
 otherwise({
   redirectTo: '/home'
 });
});
</code></pre><p>You'll typically not use &lsquo;template&rsquo; but &lsquo;templateUrl&rsquo; instead. &lsquo;templateUrl&rsquo; lets you specify an HTML file for your template. Routes can be more complicated - they can contain parameters which are accessible from the controller. This means your routes could include entity ids and other data, and the controller can load the data it needs to based on the route. This makes handling deep linking a bit more straightforward.</p><h3 id=view-and-route-quick-tips>View and Route Quick Tips</h3><p>The routing capabilities of angular are powerful - you can build complex routes with many parameters.
You can get data about the current route with the $route service.</p><h2 id=thats-it>That's It</h2><p>For now. We've seen the essential components of angular apps - much more in one go would be overload. Next we'll be taking a look at the structure of an angular app. We'll be seeing more of all these components in the articles to come.</p></div><footer class="post-footer clearfix"><div class=share><a class=icon-twitter href="https://twitter.com/share?text=Practical%20AngularJS%20Part%202%20%e2%80%93%20Components%20of%20an%20AngularJS%20Application&url=https%3a%2f%2fdwmkerr.github.io%2fdwmkerr.com%2fpractical-angularjs-part2%2f" onclick="window.open(this.href,'twitter-share','width=550,height=235');return false;"><i class="fa fa-twitter"></i><span class=hidden>Twitter</span></a>
<a class=icon-facebook href="https://www.facebook.com/sharer/sharer.php?u=https%3a%2f%2fdwmkerr.github.io%2fdwmkerr.com%2fpractical-angularjs-part2%2f" onclick="window.open(this.href,'facebook-share','width=580,height=296');return false;"><i class="fa fa-facebook"></i><span class=hidden>Facebook</span></a></div></footer><div class=comments><div id=disqus_thread></div><script type=application/javascript>var disqus_config=function(){};(function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById('disqus_thread').innerHTML='Disqus comments not available by default when the website is previewed locally.';return;}
var d=document,s=d.createElement('script');s.async=true;s.src='//'+"dmwkerr"+'.disqus.com/embed.js';s.setAttribute('data-timestamp',+new Date());(d.head||d.body).appendChild(s);})();</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></article></div></div></div><footer class=footer><div class=container><div class=site-title-wrapper><h1 class=site-title><a title=dwmkerr.com href=https://dwmkerr.github.io/dwmkerr.com/>dwmkerr.com</a></h1><a class="button-square button-jump-top js-jump-top" href=#><i class="fa fa-angle-up"></i></a></div><p class=footer-copyright><span>&copy; 2019 / Powered by <a href=https://gohugo.io/>Hugo</a></span></p><p class=footer-copyright><span><a href=https://github.com/roryg/ghostwriter>Ghostwriter theme</a> By <a href=http://jollygoodthemes.com>JollyGoodThemes</a></span>
<span>/ <a href=https://github.com/jbub/ghostwriter>Ported</a> to Hugo By <a href=https://github.com/jbub>jbub</a></span></p></div></footer><script src=https://dwmkerr.github.io/dwmkerr.com/js/jquery-1.11.3.min.js></script><script src=https://dwmkerr.github.io/dwmkerr.com/js/jquery.fitvids.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js></script><script src=https://dwmkerr.github.io/dwmkerr.com/js/scripts.js></script></body></html>